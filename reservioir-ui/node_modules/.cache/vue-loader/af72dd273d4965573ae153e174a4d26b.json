{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\managementGuarantee\\funds\\outlay.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\managementGuarantee\\funds\\outlay.vue","mtime":1640419132073},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29sb3I0MDkgewogIGNvbG9yOiAjNDA5ZWZmOwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLmZyb20tY29sLWFib3V0IHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbGluZS1oZWlnaHQ6IDE2MHB4OwogIGJvcmRlci1yaWdodDogI2E0ZDVmZiAxcHggc29saWQ7CiAgYm9yZGVyLWxlZnQ6ICNhNGQ1ZmYgMXB4IHNvbGlkOwp9CgouZnJvbS1jb2wtZm9ybSB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGxpbmUtaGVpZ2h0OiAyODBweDsKICBib3JkZXItcmlnaHQ6ICNhNGQ1ZmYgMXB4IHNvbGlkOwp9Cgo="},{"version":3,"sources":["outlay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0uBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"outlay.vue","sourceRoot":"src/views/managementGuarantee/funds","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-row class=\"from-top\" style=\"width:100%;\">\n      <!-- <el-col :span=\"24\">\n        <el-steps :active=\"1\" simple>\n          <el-step title=\"编制\" icon=\"el-icon-edit\"></el-step>\n          <el-step title=\"审核\" icon=\"el-icon-upload\"></el-step>\n          <el-step title=\"批准\" icon=\"el-icon-picture\"></el-step>\n          <el-step title=\"完成\" icon=\"el-icon-picture\"></el-step>\n        </el-steps>\n      </el-col> -->\n      <!-- <el-col :span=\"24\">\n        <div style=\"margin: 0 auto;display: flex;align-items: center;justify-content:center;width: 80% ;\">\n          <div style=\"position: relative;\">\n            <img src=\"../../../assets/images/01s.png\"/>\n            <div  style=\"position: absolute;top: 27px;left: 23px;width: 50%;color: #FFFFFF;\">编制</div>\n          </div>\n          <div  style=\"position: relative;width: 20%;\" >\n            <img :src=\"require(active>1? '../../../assets/images/04.png':'../../../assets/images/05.png')\" style=\"width: 100%;height: 18px;\"/>\n            <img v-if=\"active==1\" :src=\"require(active==1? '../../../assets/images/07.gif':'../../../assets/images/06.gif')\" style=\"position: absolute;top: 0px;left: 100px;height: 80%;width: 10%;\"/>\n            </div>\n          <div  style=\"position: relative;\">\n            <img :src=\"require(active>1? '../../../assets/images/01s.png':'../../../assets/images/01.png')\" />\n            <div  :style=\"active>1? 'position: absolute;top:27px;left: 23px;width: 50%;color: #FFFFFF;':'position: absolute;top: 27px;left: 23px;width: 50%;color: #999999;'\">审核</div>\n            </div>\n          <div  style=\"position: relative;width: 20%;\">\n            <img :src=\"require(active>2? '../../../assets/images/04.png':'../../../assets/images/05.png')\" style=\"width: 100%;height: 18px;\"/>\n            <img v-if=\"active==2 || active==1\" :src=\"require(active==2? '../../../assets/images/07.gif':'../../../assets/images/06.gif')\" style=\"position: absolute;top: 0px;left: 100px;height: 80%;width: 10%;\"/>\n            </div>\n          <div   style=\"position: relative;\">\n            <img :src=\"require(active>2? '../../../assets/images/01s.png':'../../../assets/images/01.png')\"/>\n            <div  :style=\"active>1? 'position: absolute;top:27px;left: 23px;width: 50%;color: #FFFFFF;':'position: absolute;top: 27px;left: 23px;width: 50%;color: #999999;'\">批准</div>\n            </div>\n            <div  style=\"position: relative;width: 20%;\">\n              <img :src=\"require(active==4? '../../../assets/images/04.png':'../../../assets/images/05.png')\" style=\"width: 100%;height: 18px;\"/>\n              <img v-if=\"active!=4\" :src=\"require(active==3? '../../../assets/images/07.gif':'../../../assets/images/06.gif')\" style=\"position: absolute;top: 0px;left: 100px;height: 80%;width: 10%;\"/>\n              </div>\n            <div   style=\"position: relative;\">\n              <img :src=\"require(active==4? '../../../assets/images/01s.png':'../../../assets/images/01.png')\" />\n              <div  :style=\"active>1? 'position: absolute;top: 27px;left: 23px;width: 50%;color: #FFFFFF;':'position: absolute;top: 27px;left: 23px;width: 50%;color: #999999;'\">完成</div>\n              </div>\n        </div>\n      </el-col> -->\n      <el-col :span=\"24\">\n        <div style=\"margin: 0 auto;display: flex;align-items: center;width: 100%;justify-content:center;\">\n          <div style=\"position: relative;\">\n            <img src=\"../../../assets/images/jin.png\"/>\n            <div  style=\"position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;\">1.编制</div>\n          </div>\n          <div  style=\"position: relative;\">\n            <img :src=\"require(active>1? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n            <div  :style=\"active>1? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">2.审核</div>\n            </div>\n          <div   style=\"position: relative;\">\n            <img :src=\"require(active>2? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n            <div  :style=\"active>2? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">3.批准</div>\n            </div>\n            <div   style=\"position: relative;\">\n              <img :src=\"require(active==4? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n              <div  :style=\"active==4? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">4.完成</div>\n              </div>\n        </div>\n      </el-col>\n    </el-row>\n    <div class=\"from-div\">\n      <el-row>\n        <el-col :span=\"24\"\n                class=\"from-div-title\"\n                style=\"background-color: rgba(215, 215, 215, 1); text-align: right;\"\n\n        >\n          <el-button v-if=\"active == 1 && formData.fId == null || formData.fId == '' \" type=\"primary\" size=\"small\" style=\"margin-right: 5px\" @click=\"submit(0)\">暂存\n          </el-button>\n          <el-button v-if=\"active == 1\" type=\"primary\" size=\"small\" style=\"margin-right: 20px\" @click=\"submit(1)\">提交\n          </el-button>\n          <el-button v-if=\"active == 2\" type=\"primary\" size=\"small\" style=\"margin-right: 20px\" @click=\"check\">审核</el-button>\n          <el-button v-if=\"active == 3\" type=\"primary\" size=\"small\" style=\"margin-right: 20px\" @click=\"approve\">审批</el-button>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"24\"\n                class=\"from-div-title\"\n        >\n          经费支出详情表\n        </el-col>\n      </el-row>\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col-left\">\n          经费申请名称\n        </el-col>\n        <el-col :span=\"13\" class=\"from-border-right\">\n          <el-input v-model=\"formData.fApplyName\" clearable placeholder=\"请输入内容\" v-bind:disabled=\"active != 1? true : false\"></el-input>\n        </el-col>\n        <el-col :span=\"3\" class=\"from-col-left\">\n          类别\n        </el-col>\n        <el-col :span=\"5\" class=\"from-col-left\">\n          <el-select\n            v-model=\"formData.fApplyType\"\n            placeholder=\"类别\"\n            clearable\n            size=\"small\"\n            v-bind:disabled=\"active != 1? true : false\"\n          >\n            <el-option\n              v-for=\"(item,index) in dict.fundType\"\n              :key=\"item.dictValue\"\n              :label=\"item.dictLabel\"\n              :value=\"item.dictValue\"\n            />\n          </el-select>\n        </el-col>\n      </el-row>\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col-left\">\n          申请金额(元)\n        </el-col>\n        <el-col :span=\"3\" class=\"from-border-right\">\n          <el-input v-model=\"formData.fApplyMoney\" clearable placeholder=\"请输入内容\" v-bind:disabled=\"active != 1? true : false\"></el-input>\n        </el-col>\n        <el-col :span=\"3\" class=\"from-col-left\">\n          批准金额(元)\n        </el-col>\n        <el-col :span=\"3\" class=\"from-border-right\">\n          <el-input v-model=\"formData.fApprovalMoney\" clearable placeholder=\"请输入内容\" v-bind:disabled=\"active != 1? true : false\"></el-input>\n        </el-col>\n        <el-col :span=\"3\" class=\"from-col-left\">\n          支出金额(元)\n        </el-col>\n        <el-col :span=\"3\" class=\"from-border-right\">\n          <el-input v-model=\"formData.fExpendMoney\" clearable placeholder=\"请输入内容\" v-bind:disabled=\"active != 1? true : false\"></el-input>\n        </el-col>\n        <el-col :span=\"3\" class=\"from-col-left\">\n          结余金额(元)\n        </el-col>\n        <el-col :span=\"3\" class=\"from-border-right\">\n          <el-input v-model=\"formData.fSurplusMoney\" clearable placeholder=\"请输入内容\" v-bind:disabled=\"active != 1? true : false\"></el-input>\n        </el-col>\n      </el-row>\n\n      <el-row  class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col\" style=\"line-height:188px;\">\n          用途\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 70px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            用途说明：\n          </div>\n          <el-input type=\"textarea\"  maxlength=\"500\" show-word-limit  :rows=\"5\" v-model=\"formData.fPurpose\" placeholder=\"请输入内容\" v-bind:disabled=\"active != 1? true : false\"/>\n        </el-col>\n      </el-row>\n\n      <el-row  class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-borderibht\" >\n          经费清单\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 400px;\">\n           <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n             经费清单：\n           </div>\n          <el-input type=\"textarea\"  maxlength=\"500\" show-word-limit  :rows=\"8\" placeholder=\"请输入内容\" v-model=\"formData.fFundListing\" v-bind:disabled=\"active != 1? true : false\">\n          </el-input>\n          <div style=\"display:flex;justify-content:space-between;margin-top: 70px;\">\n           <div  style=\"width: 200px;margin-left: 20px;\">\n             <el-upload style=\"margin-left: 15px;\" class=\"upload-demo\"\n                        :headers=\"GLOBAL.headers()\"\n                        :action=\"GLOBAL.httpUrl\"\n                        :on-preview=\"handlePreview\" :on-remove=\"handleRemove\"  multiple\n                        :on-success=\"uploadedSuccess\"\n                        :show-file-list=\"true\"\n                        :auto-upload=\"true\"\n                        :limit=\"1\"\n                        :disabled=\"active != 1\"\n                        :on-exceed=\"handleExceed\" :file-list=\"fileList\">\n               <el-button size=\"small\" type=\"primary\" :disabled=\"active != 1\">经费清单</el-button>\n\t\t\t   <div slot=\"tip\" class=\"el-upload__tip\" style=\"margin-top: 15px\">上传文件不得超过100M</div>\n             </el-upload>\n          </div>\n          <div style=\"font-size: 20px;margin-right: 10px;margin-top: -10px;\">\n            <div style=\"text-align: left\">\n             <div style=\"margin-left:-1px;display:inline;\">编制人：<el-input v-model=\"formData.fPreparedBy\"  placeholder=\"请输入编制人名称\" style=\"width:220px;border: 1px solid #DCDFE6;\" v-bind:disabled=\"active != 1? true : false\"></el-input></div>\n            <div >\n              <div class=\"block\" style=\"transform:translateY(10%);\">\n                <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\"/>\n                <el-date-picker style=\"border: 1px solid #DCDFE6;\"\n                  type=\"date\"\n                  v-model=\"formData.fPreparationTime\"\n                  placeholder=\"选择日期\"\n                  format=\"yyyy 年 MM 月 dd 日\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\n                  v-bind:disabled=\"active != 1? true : false\"\n                  >\n                </el-date-picker>\n              </div>\n            </div>\n            </div>\n          </div>\n          </div>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col\">\n          计划审核\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 50px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            审核意见：\n          </div>\n          <el-input type=\"textarea\"  maxlength=\"500\" show-word-limit  :rows=\"3\" v-model=\"formData.fReviewComments\" placeholder=\"请输入内容\" v-bind:disabled=\"active != 2? true : false\">\n          </el-input>\n          <div class=\"from-select\">\n            <div style=\"margin-left: 10px;\">\n               <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                审核结果：\n              </div>\n              <el-select v-model=\"formData.fReviewResult\" clearable placeholder=\"请选择\"\n                         v-bind:disabled=\"active != 2? true : false\">\n                <el-option v-for=\"item in dict.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\"\n                           :value=\"item.dictValue\">\n                </el-option>\n              </el-select>\n            </div>\n            <div>\n              <span >审核人：<el-input v-model=\"formData.fReviewPeople\"  placeholder=\"请输入内容\" style=\"width:180px;\" v-bind:disabled=\"active != 2? true : false\"></el-input></span>\n              <div class=\"block\"  style=\"display:inline;margin-left:10px;\">\n                <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\"/>\n                <el-date-picker\n                  type=\"date\"\n                  v-model=\"formData.fReviewDate\"\n                  placeholder=\"选择日期\"\n                  format=\"yyyy 年 MM 月 dd 日\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\n                  v-bind:disabled=\"active != 2? true : false\"\n                >\n                </el-date-picker>\n              </div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col\">\n          经费审批\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 50px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            审批意见：\n          </div>\n          <el-input type=\"textarea\"  maxlength=\"500\" show-word-limit  :rows=\"3\" v-model=\"formData.fAuditComments\" placeholder=\"请输入内容\" v-bind:disabled=\"active != 3? true : false\">\n          </el-input>\n          <div class=\"from-select\">\n            <div style=\"margin-left: 10px;\">\n               <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                审批结果：\n              </div>\n              <el-select v-model=\"formData.fAuditResult\" clearable placeholder=\"请选择\"\n                         v-bind:disabled=\"active != 3? true : false\">\n                <el-option v-for=\"item in dict.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\"\n                           :value=\"item.dictValue\">\n                </el-option>\n              </el-select>\n            </div>\n            <div>\n              <span >审批人：<el-input v-model=\"formData.fAuditPeople\"  placeholder=\"请输入内容\" style=\"width:180px;\" v-bind:disabled=\"active != 3? true : false\"></el-input></span>\n              <div class=\"block\"  style=\"display:inline;margin-left:10px;\">\n                <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\"/>\n                <el-date-picker\n                  type=\"date\"\n                  v-model=\"formData.fAuditDate\"\n                  placeholder=\"选择日期\"\n                  format=\"yyyy 年 MM 月 dd 日\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\n                  v-bind:disabled=\"active != 3? true : false\"\n                >\n                </el-date-picker>\n              </div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n\n<!--    <el-dialog-->\n<!--      title=\"选择处理人\"-->\n<!--      :visible.sync=\"dialogVisible\"-->\n<!--      :modal=\"false\"-->\n<!--      width=\"30%\">-->\n<!--      <el-radio v-model=\"formData.fActPersion\" :label=\"item.userId\" v-for=\"(item,index) in userList\" :key=\"index\">-->\n<!--        {{ item.nickName }}-->\n<!--      </el-radio>-->\n<!--      <span slot=\"footer\" class=\"dialog-footer\">-->\n<!--        <el-button @click=\"dialogVisible = false\">取 消</el-button>-->\n<!--        <el-button type=\"primary\" @click=\"addAndUpdate\">确 定</el-button>-->\n<!--      </span>-->\n<!--    </el-dialog>-->\n\n\n  </div>\n</template>\n\n<script>\n\nimport { getToken } from \"@/utils/auth\";\nimport {\n  getUserList\n} from \"@/api/security/planning\";\nimport { inquiry } from \"@/api/fundManage/apply\"\nimport { addExpend, updateExpend } from \"@/api/fundManage/expend\"\n\nimport {\n  dataQuery\n} from \"@/api/indemnification/training\";\n\nexport default {\n  components: { },\n  data() {\n    return {\n\n      dict: {\n        fundType: [],\n        result: [],\n      },\n\n      // 文件上传\n      upload: {\n        // 设置上传的请求头部\n        headers: {Authorization: \"Bearer \" + getToken()},\n        // 上传的地址\n        url: process.env.VUE_APP_BASE_API + \"/file/upload\"\n      },\n\n      userList: [],\n\n      // dialogVisible: false,\n\n      active:1,\n\n      info: {\n        stockDate:this.getNowTime(),  //日期\n      },\n\n      formData: {\n\n        /** 经费支出表ID */\n        fId: null,\n\n        /** 经费申请名称 */\n        fApplyName: null,\n\n        /** 申请类别 */\n        fApplyType: null,\n\n        /** 申请金额 */\n        fApplyMoney: null,\n\n        /** 批准金额 */\n        fApprovalMoney: null,\n\n        /** 支出金额 */\n        fExpendMoney: null,\n\n        /** 结余金额 */\n        fSurplusMoney: null,\n\n        /** 用途 */\n        fPurpose: null,\n\n        /** 经费清单 */\n        fFundListing: null,\n\n        /** 编制人 */\n        fPreparedBy: null,\n\n        /** 编制时间 */\n        fPreparationTime: null,\n\n        /** 经费清单附件ID */\n        fExpendFileId: null,\n\n        /** 审核意见 */\n        fReviewComments: null,\n\n        /** 审核结果 */\n        fReviewResult: null,\n\n        /** 审核人 */\n        fReviewPeople: null,\n\n        /** 审核时间 */\n        fReviewDate: null,\n\n        /** 审批意见 */\n        fAuditComments: null,\n\n        /** 审批结果 */\n        fAuditResult: null,\n\n        /** 审批人 */\n        fAuditPeople: null,\n\n        /** 审批时间 */\n        fAuditDate: null,\n\n        /** 创建人 */\n        fCreatePeople: null,\n\n        /** 创建时间 */\n        fCreateTime: null,\n\n        /** 流程实例ID */\n        fActId: null,\n\n        // /** 下一节点审核人 */\n        // fActPersion: null,\n\n        /** 流程状态 1已提交启动 2：审核中 3：驳回 4：审核完成 */\n        ActStatus: null,\n\n        /** 流程节点 */\n        fActNode: null,\n\n        /**\n         * 暂存或提交 1提交 0暂存\n         */\n        holdOrSubmit: null,\n\n        /**\n         * 当前登陆人\n         */\n        landingPersonId: null\n\n      },\n\n      fileList: [],\n\n    };\n  },\n  created() {\n    this.Personnel()\n    this.inquiry()\n    this.dataQuery()\n  },\n  methods: {\n\n    init(data,file) {\n      this.active = data.fActStatus\n      this.formData = data\n      if (file) {\n        this.fileList = [{name: file.fOldFileName, url: file.fFilePath}]\n      }\n      if (data.fReviewResult) {\n        this.formData.fReviewResult = this.formData.fReviewResult.toString();\n      }\n      if (data.fAuditResult) {\n        this.formData.fAuditResult = this.formData.fAuditResult.toString();\n      }\n    },\n\n    inquiry() {\n      inquiry().then(res => {\n        if (res.code == 200) {\n          this.dict.result = res.data.result\n        }\n      });\n    },\n\n    dataQuery() {\n      var query = { dictType: 'fundType' }\n      dataQuery(query).then(res => {\n        if (res.code == 200) {\n          this.dict.fundType = res.data\n        }\n      });\n    },\n\n    Personnel() {\n      getUserList().then(response => {\n        this.userList = response.data\n      })\n    },\n\n\n    submit(type) {\n      if (this.active == 1) {\n        if (this.formData.fApplyName == null) {\n          this.$message.error(\"请填写申请名称\")\n          return false\n        } else if (this.formData.fApplyType == null) {\n          this.$message.error(\"请选择申请类别\")\n          return false\n        } else if (this.formData.fApplyMoney == null) {\n          this.$message.error(\"请填写申请金额\")\n          return false\n        } else if (this.formData.fApprovalMoney == null) {\n          this.$message.error(\"请填批准金额\")\n          return false\n        } else if (this.formData.fExpendMoney == null) {\n          this.$message.error(\"请填写支出金额\")\n          return false\n        } else if (this.formData.fSurplusMoney == null) {\n          this.$message.error(\"请填写结余金额\")\n          return false\n        } else if (this.formData.fPurpose == null) {\n          this.$message.error(\"请填写用途\")\n          return false\n        }else if (this.formData.fFundListing == null) {\n          this.$message.error(\"请填写经费清单\")\n          return false\n        }else if (this.formData.fExpendFileId == null) {\n          this.$message.error(\"请上传经费清单\")\n          return false\n        }else if (this.formData.fPreparedBy == null) {\n          this.$message.error(\"请填写编制人\")\n          return false\n        }else if (this.formData.fPreparationTime == null) {\n          this.$message.error(\"请填写编制时间\")\n          return false\n        }\n        this.formData.holdOrSubmit = type\n        // if (type == 1) {\n        //   this.dialogVisible = true;\n        // } else {\n        this.addAndUpdate()\n        // }\n      }\n    },\n\n    check() {\n      if (this.active == 2) {\n        if (this.formData.fReviewComments == null) {\n          this.$message.error(\"请填写审核意见\")\n          return false\n        } else if (this.formData.fReviewResult == null) {\n          this.$message.error(\"请选择审核结果\")\n          return false\n        } else if (this.formData.fReviewPeople == null) {\n          this.$message.error(\"请填写审核人\")\n          return false\n        } else if (this.formData.fReviewDate == null) {\n          this.$message.error(\"请选择审核时间\")\n          return false\n        }\n        // this.dialogVisible = true\n        this.addAndUpdate()\n      }\n    },\n\n    approve() {\n      if (this.active == 3) {\n        if (this.formData.fAuditComments == null) {\n          this.$message.error(\"请填写审批意见\")\n          return false\n        } else if (this.formData.fAuditResult == null) {\n          this.$message.error(\"请选择审批结果\")\n          return false\n        } else if (this.formData.fAuditPeople == null) {\n          this.$message.error(\"请填写审批人\")\n          return false\n        } else if (this.formData.fAuditDate == null) {\n          this.$message.error(\"请选择审批时间\")\n          return false\n        }\n        this.addAndUpdate()\n      }\n    },\n\n\n    addAndUpdate() {\n      // if (this.formData.holdOrSubmit == 1) {\n      //   if (this.formData.fActPersion == null) {\n      //     this.$message.error(\"请选择流程下一环节审核人\")\n      //     return false\n      //   }\n      // }\n      if (this.formData.fId != null && this.formData.fId != '') {\n        updateExpend(this.formData).then(res => {\n          if (res.code == 200) {\n            if (this.formData.holdOrSubmit == 1) {\n              this.$message.success(\"经费支出提交成功\");\n            } else {\n              this.msgSuccess(\"经费支出暂存成功\")\n            }\n            this.dialogVisible = false;\n            // 调用父组件方法关闭弹窗\n            this.$emit(\"shut\", false)\n            // 调用父组件方法查询列表\n            this.$emit(\"search\")\n          } else {\n            if (this.formData.holdOrSubmit == 1) {\n              this.$message.error(\"经费支出提交失败\");\n            } else {\n              this.msgError(\"经费支出暂存失败\")\n            }\n          }\n        });\n      } else {\n        addExpend(this.formData).then(res => {\n          if (res.code == 200) {\n            this.$message.success(\"经费支出成功\");\n            this.clearForm()\n            this.dialogVisible = false\n          } else {\n            this.$message.error(\"经费支出失败\");\n          }\n        });\n      }\n    },\n\n    uploadedSuccess(response, file, fileList) {\n      this.formData.fExpendFileId = response.data.fId\n      this.fileList = [{\n        name:response.data.fOldFileName,\n        url:response.data.fFilePath\n      }]\n    },\n    handleRemove(file, fileList) {\n      this.GLOBAL.commonFun(this.formData.fExpendFileId)\n    },\n    handlePreview(file) {\n      // window.location.href = file.url;\r\n\t  window.open(this.fileList[0].url);\n    },\n    handleExceed(files, fileList) {\n      this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n    },\n    beforeRemove(file, fileList) {\n      return this.$confirm(`确定移除 ${file.name}？`);\n    },\n    getNowTime() {\n\t       var now = new Date();\n\t       var year = now.getFullYear(); //得到年份\n\t       var month = now.getMonth(); //得到月份\n\t       var date = now.getDate(); //得到日期\n\t       var hour =\" 00:00:00\"; //默认时分秒 如果传给后台的格式为年月日时分秒，就需要加这个，如若不需要，此行可忽略\n\t       month = month + 1;\n\t       month = month.toString().padStart(2, \"0\");\n\t       date = date.toString().padStart(2, \"0\");\n\t       var defaultDate = `${year}-${month}-${date}${hour}`;\n\t       console.log(defaultDate)\n\t       return defaultDate;\n\t       this.$set(this.info, \"stockDate\", defaultDate);\n\t    },\n\n    clearForm() {\n      this.formData = {\n\n        /** 经费支出表ID */\n        fId: null,\n\n          /** 经费申请名称 */\n          fApplyName: null,\n\n          /** 申请类别 */\n          fApplyType: null,\n\n          /** 申请金额 */\n          fApplyMoney: null,\n\n          /** 批准金额 */\n          fApprovalMoney: null,\n\n          /** 支出金额 */\n          fExpendMoney: null,\n\n          /** 结余金额 */\n          fSurplusMoney: null,\n\n          /** 用途 */\n          fPurpose: null,\n\n          /** 经费清单 */\n          fFundListing: null,\n\n          /** 编制人 */\n          fPreparedBy: null,\n\n          /** 编制时间 */\n          fPreparationTime: null,\n\n          /** 经费清单附件ID */\n          fExpendFileId: null,\n\n          /** 审核意见 */\n          fReviewComments: null,\n\n          /** 审核结果 */\n          fReviewResult: null,\n\n          /** 审核人 */\n          fReviewPeople: null,\n\n          /** 审核时间 */\n          fReviewDate: null,\n\n          /** 审批意见 */\n          fAuditComments: null,\n\n          /** 审批结果 */\n          fAuditResult: null,\n\n          /** 审批人 */\n          fAuditPeople: null,\n\n          /** 审批时间 */\n          fAuditDate: null,\n\n          /** 创建人 */\n          fCreatePeople: null,\n\n          /** 创建时间 */\n          fCreateTime: null,\n\n          /** 流程实例ID */\n          fActId: null,\n\n          // /** 下一节点审核人 */\n          // fActPersion: null,\n\n          /** 流程状态 1已提交启动 2：审核中 3：驳回 4：审核完成 */\n          ActStatus: null,\n\n          /** 流程节点 */\n          fActNode: null,\n\n          /**\n           * 暂存或提交 1提交 0暂存\n           */\n          holdOrSubmit: null,\n\n          /**\n           * 当前登陆人\n           */\n          landingPersonId: null\n\n      },\n        this.fileList = []\n    }\n\n  }\n};\n</script>\n<style lang=\"scss\">\n\n.color409 {\n  color: #409eff;\n  cursor: pointer;\n}\n\n.from-col-about {\n  text-align: center;\n  line-height: 160px;\n  border-right: #a4d5ff 1px solid;\n  border-left: #a4d5ff 1px solid;\n}\n\n.from-col-form {\n  text-align: center;\n  line-height: 280px;\n  border-right: #a4d5ff 1px solid;\n}\n\n</style>\n"]}]}