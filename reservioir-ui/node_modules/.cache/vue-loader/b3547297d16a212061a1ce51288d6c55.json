{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\managementGuarantee\\institution\\addAndModify.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\managementGuarantee\\institution\\addAndModify.vue","mtime":1640096701494},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1711181252330},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IERpY3QgZnJvbSAiLi4vLi4vc3lzdGVtL2RpY3QiOwogIGltcG9ydCB7CiAgICBnZXRUb2tlbgogIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKICBpbXBvcnQgewogICAgZ2V0RmlsZUJ5SWQKICB9IGZyb20gIkAvYXBpL2ZpbGUiOwogIGltcG9ydCBFZGl0b3IgZnJvbSAnQC9jb21wb25lbnRzL0VkaXRvcic7CiAgaW1wb3J0IHsKICAgIGxpc3RUeXBlCiAgfSBmcm9tICJAL2FwaS9pbmRlbW5pZmljYXRpb24vdHlwZS5qcyI7CiAgaW1wb3J0IFRyZWVzZWxlY3QgZnJvbSAiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QiOwogIGltcG9ydCAiQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MiOwoKCiAgZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogewogICAgICBEaWN0LAogICAgICBFZGl0b3IsCiAgICAgIFRyZWVzZWxlY3QKICAgIH0sCiAgICBwcm9wczogWydqdWRnZScsICdtYW5hZ2VTeXN0ZW0nXSwKICAgIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZUxpc3RUcmVlOiBbXSwKICAgICAgICBzY29yZTogWyfliLbluqbnrqHnkIYnXSwKICAgICAgICB0ZXh0YXJlYTogJycsCiAgICAgICAgZmlsZUxpc3Q6IFtdCiAgICAgIH07CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgbWFuYWdlU3lzdGVtOiBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLmdldEZpbGUoKTsKICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuZ2V0VHJlZXNlbGVjdCgpOwogICAgICB0aGlzLmdldEZpbGUoKTsKICAgIH0sCgogICAgbW91bnRlZCgpIHt9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgZ2V0RmlsZSgpIHsKICAgICAgICBjb25zb2xlLmxvZygnZmlsZUxpc3QgPSBbXScpOwogICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXTsKICAgICAgICBpZiAodGhpcy5tYW5hZ2VTeXN0ZW0uZkluc3RpdHV0aW9uSWQpIHsKICAgICAgICAgIGdldEZpbGVCeUlkKHsKICAgICAgICAgICAgaWQ6IHRoaXMubWFuYWdlU3lzdGVtLmZJbnN0aXR1dGlvbklkCiAgICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgICB0aGlzLmZpbGVMaXN0ID0gW3sKICAgICAgICAgICAgICAgIG5hbWU6IHJlc3VsdC5kYXRhLmZPbGRGaWxlTmFtZSwKICAgICAgICAgICAgICAgIHVybDogcmVzdWx0LmRhdGEuZkZpbGVQYXRoCiAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImZpbGVMaXN0LnVybDoiLCB0aGlzLmZpbGVMaXN0WzBdLnVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9LAogICAgICAvKiog5p+l6K+i5Yi25bqm5YiG57G75LiL5ouJ5qCR57uT5p6EICovCiAgICAgIGdldFRyZWVzZWxlY3QoKSB7CiAgICAgICAgbGlzdFR5cGUoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnN0IFRyZWVMaXN0ID0gewogICAgICAgICAgICBmVHlwZUlkOiAwLAogICAgICAgICAgICBmVHlwZU5hbWU6ICfpobbnuqfliLbluqbliIbnsbvoioLngrknLAogICAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICAgIH07CiAgICAgICAgICBUcmVlTGlzdC5jaGlsZHJlbiA9IHRoaXMuaGFuZGxlVHJlZShyZXNwb25zZS5yb3dzLCAiZklkIiwgImZQYXJlbnRJZCIpOwogICAgICAgICAgdGhpcy50eXBlTGlzdFRyZWUucHVzaChUcmVlTGlzdCk7CiAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlTGlzdFRyZWUpOwogICAgICAgIH0pOwogICAgICB9LAogICAgICAvKiog6L2s5o2i5Yi25bqm5YiG57G75pWw5o2u57uT5p6EICovCiAgICAgIG5vcm1hbGl6ZXIobm9kZSkgewogICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW47CiAgICAgICAgfQogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogbm9kZS5mSWQsCiAgICAgICAgICBsYWJlbDogbm9kZS5mVHlwZU5hbWUsCiAgICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbgogICAgICAgIH07CiAgICAgIH0sCgogICAgICB1cGxvYWRlZFN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgICAgdGhpcy5tYW5hZ2VTeXN0ZW0uZkluc3RpdHV0aW9uSWQgPSByZXNwb25zZS5kYXRhLmZJZAogICAgICB9LAogICAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgICB0aGlzLkdMT0JBTC5jb21tb25GdW4odGhpcy5tYW5hZ2VTeXN0ZW0uZkluc3RpdHV0aW9uSWQpOwogICAgICAgIHRoaXMubWFuYWdlU3lzdGVtLmZJbnN0aXR1dGlvbklkID0gJyc7CiAgICAgIH0sCiAgICAgIGhhbmRsZVByZXZpZXcoZmlsZSkgewogICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGhpcy5maWxlTGlzdFswXS51cmw7CgkJd2luZG93Lm9wZW4odGhpcy5maWxlTGlzdFswXS51cmwpOwogICAgICB9LAogICAgICBoYW5kbGVFeGNlZWQoZmlsZXMsIGZpbGVMaXN0KSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKGDlvZPliY3pmZDliLbpgInmi6kgMSDkuKrmlofku7bvvIzmnKzmrKHpgInmi6nkuoYgJHtmaWxlcy5sZW5ndGh9IOS4quaWh+S7tu+8jOWFsemAieaLqeS6hiAke2ZpbGVzLmxlbmd0aCArIGZpbGVMaXN0Lmxlbmd0aH0g5Liq5paH5Lu2YCk7CiAgICAgIH0sCiAgICAgIGJlZm9yZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKGDnoa7lrprnp7vpmaQgJHtmaWxlLm5hbWV977yfYCk7CiAgICAgIH0KICAgIH0KICB9Owo="},{"version":3,"sources":["addAndModify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addAndModify.vue","sourceRoot":"src/views/managementGuarantee/institution","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n\r\n    <div class=\"from-div\" style=\"width: 100%\">\r\n\r\n      <el-row class=\"from-border-bottom\">\r\n        <el-col :span=\"4\" class=\"from-col-left\">\r\n          制度名称\r\n        </el-col>\r\n        <el-col :span=\"20\" class=\"from-border-right\">\r\n          <el-input v-model=\"manageSystem.fSystemName\" clearable placeholder=\"请输入内容\"></el-input>\r\n        </el-col>\r\n      </el-row>\r\n\r\n\r\n      <el-row class=\"from-border-bottom\">\r\n        <el-col :span=\"4\" class=\"from-col-left\">\r\n          制度分类\r\n        </el-col>\r\n        <el-col :span=\"20\" class=\"from-border-right\">\r\n          <treeselect style=\"100%\" v-model=\"manageSystem.fTypeId\" :options=\"typeListTree\" :normalizer=\"normalizer\"\r\n            placeholder=\"选择制度分类\" />\r\n\r\n          <!-- <el-select\r\n            style=\"width: 100%\"\r\n            v-model=\"manageSystem.score\"\r\n            placeholder=\"制度分类\"\r\n            clearable\r\n            size=\"small\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in score\"\r\n              :key=\"index\"\r\n              :label=\"item\"\r\n              :value=\"index\"\r\n            />\r\n          </el-select> -->\r\n        </el-col>\r\n      </el-row>\r\n      <el-row class=\"from-border-bottom\">\r\n        <el-col :span=\"4\" class=\"from-col\">\r\n          制度说明\r\n        </el-col>\r\n        <el-col :span=\"20\" style=\"height: 50px;\">\r\n          <el-input type=\"textarea\" maxlength=\"500\" :rows=\"4\" placeholder=\"请输入制度说明\" v-model=\"manageSystem.fRemark\">\r\n          </el-input>\r\n        </el-col>\r\n      </el-row>\r\n\r\n\r\n      <el-row class=\"from-border-bottom\">\r\n        <el-col :span=\"4\" class=\"from-borderibht\">\r\n          制度内容\r\n        </el-col>\r\n        <el-col :span=\"20\" style=\"height: 400px;\">\r\n          <editor v-model=\"manageSystem.fSystemContent\" :min-height=\"332\" style=\"height: 80%;\"/>\r\n        </el-col>\r\n      </el-row>\r\n\r\n\r\n      <el-row class=\"from-border-bottom\">\r\n        <el-col :span=\"4\" class=\"from-col\">\r\n          制度附件\r\n        </el-col>\r\n        <el-col :span=\"20\" style=\"height: 50px;\">\r\n          <div style=\"width: 200px;margin-top: 20px;margin-left: 20px;\">\r\n            <el-upload style=\"margin-left: 15px;margin-top: 15px\" class=\"upload-demo\" :headers=\"GLOBAL.headers()\"\r\n              :action=\"GLOBAL.httpUrl\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" \r\n              multiple :on-success=\"uploadedSuccess\" :show-file-list=\"true\" :auto-upload=\"true\" :limit=\"1\"\r\n              :on-exceed=\"handleExceed\" :file-list=\"fileList\">\r\n              <el-button v-if=\"judge == 0\" size=\"small\" type=\"primary\">点击上传</el-button>\r\n              <div v-if=\"judge == 0\" slot=\"tip\" class=\"el-upload__tip\" style=\"margin-top: 15px\">上传文件不得超过100M</div>\r\n            </el-upload>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Dict from \"../../system/dict\";\r\n  import {\r\n    getToken\r\n  } from \"@/utils/auth\";\r\n  import {\r\n    getFileById\r\n  } from \"@/api/file\";\r\n  import Editor from '@/components/Editor';\r\n  import {\r\n    listType\r\n  } from \"@/api/indemnification/type.js\";\r\n  import Treeselect from \"@riophae/vue-treeselect\";\r\n  import \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\n\r\n\r\n  export default {\r\n    components: {\r\n      Dict,\r\n      Editor,\r\n      Treeselect\r\n    },\r\n    props: ['judge', 'manageSystem'],\r\n    data() {\r\n      return {\r\n        typeListTree: [],\r\n        score: ['制度管理'],\r\n        textarea: '',\r\n        fileList: []\r\n      };\r\n    },\r\n    watch: {\r\n      manageSystem: function() {\r\n        this.getFile();\r\n      }\r\n    },\r\n    created() {\r\n      this.getTreeselect();\r\n      this.getFile();\r\n    },\r\n\r\n    mounted() {},\r\n\r\n    methods: {\r\n      getFile() {\r\n        console.log('fileList = []');\r\n        this.fileList = [];\r\n        if (this.manageSystem.fInstitutionId) {\r\n          getFileById({\r\n            id: this.manageSystem.fInstitutionId\r\n          }).then(result => {\r\n            if (result) {\r\n              this.fileList = [{\r\n                name: result.data.fOldFileName,\r\n                url: result.data.fFilePath\r\n              }];\r\n              console.log(\"fileList.url:\", this.fileList[0].url);\r\n            }\r\n          })\r\n        }\r\n      },\r\n      /** 查询制度分类下拉树结构 */\r\n      getTreeselect() {\r\n        listType().then(response => {\r\n          const TreeList = {\r\n            fTypeId: 0,\r\n            fTypeName: '顶级制度分类节点',\r\n            children: []\r\n          };\r\n          TreeList.children = this.handleTree(response.rows, \"fId\", \"fParentId\");\r\n          this.typeListTree.push(TreeList);\r\n          console.log(typeListTree);\r\n        });\r\n      },\r\n      /** 转换制度分类数据结构 */\r\n      normalizer(node) {\r\n        if (node.children && !node.children.length) {\r\n          delete node.children;\r\n        }\r\n        return {\r\n          id: node.fId,\r\n          label: node.fTypeName,\r\n          children: node.children\r\n        };\r\n      },\r\n\r\n      uploadedSuccess(response, file, fileList) {\r\n        this.manageSystem.fInstitutionId = response.data.fId\r\n      },\r\n      handleRemove(file, fileList) {\n        this.GLOBAL.commonFun(this.manageSystem.fInstitutionId);\r\n        this.manageSystem.fInstitutionId = '';\n      },\r\n      handlePreview(file) {\r\n        // window.location.href = this.fileList[0].url;\r\n\t\twindow.open(this.fileList[0].url);\r\n      },\r\n      handleExceed(files, fileList) {\r\n        this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n      },\r\n      beforeRemove(file, fileList) {\r\n        return this.$confirm(`确定移除 ${file.name}？`);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"scss\">\r\n  .color409 {\r\n    color: #409eff;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .from-col-about {\r\n    text-align: center;\r\n    line-height: 160px;\r\n    border-right: #a4d5ff 1px solid;\r\n    border-left: #a4d5ff 1px solid;\r\n  }\r\n\r\n  .from-col-form {\r\n    text-align: center;\r\n    line-height: 250px;\r\n    border-right: #a4d5ff 1px solid;\r\n  }\r\n</style>\n"]}]}