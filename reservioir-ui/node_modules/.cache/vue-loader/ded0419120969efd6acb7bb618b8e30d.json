{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\safetyManagement\\evaluation\\evaluation.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\safetyManagement\\evaluation\\evaluation.vue","mtime":1640419132408},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29sb3I0MDkgewogIGNvbG9yOiAjNDA5ZWZmOwogIGN1cnNvcjogcG9pbnRlcjsKfQo="},{"version":3,"sources":["evaluation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkkBA;AACA;AACA;AACA","file":"evaluation.vue","sourceRoot":"src/views/safetyManagement/evaluation","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-row class=\"from-top\">\n      <el-col :span=\"24\">\n        <div style=\"margin: 0 auto;display: flex;align-items: center;width: 100%;justify-content:center;\">\n          <div style=\"position: relative;\">\n            <img src=\"../../../assets/images/jin.png\" />\n            <div style=\"position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;\">1.编制</div>\n          </div>\n          <div style=\"position: relative;\">\n            <img :src=\"require(active>1? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n            <div\n              :style=\"active>1? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n              2.审核</div>\n          </div>\n          <div style=\"position: relative;\">\n            <img :src=\"require(active>=3? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n            <div\n              :style=\"active>1? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n              3.审批</div>\n          </div>\n          <div style=\"position: relative;\">\n            <img :src=\"require(active==4? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n            <div\n              :style=\"active>1? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n              4.完成</div>\n          </div>\n        </div>\n      </el-col>\n    </el-row>\n    <div class=\"from-div\">\n      <el-row>\n        <el-col :span=\"24\" class=\"from-div-title\" style=\"background-color: rgba(215, 215, 215, 1); text-align: right;\">\n          <div style=\"margin-right: 15px\">\n            <!-- <el-button type=\"primary\" size=\"small\">保存</el-button>\n            <el-button type=\"primary\" size=\"small\">下载</el-button> -->\n            <el-button type=\"primary\" size=\"small\" @click=\"handleAdd\">新建</el-button>\n            <el-button type=\"primary\" size=\"small\" @click=\"addSubmits\" v-if=\"active!=4\">提交</el-button>\n          </div>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"24\" class=\"from-div-title\">\n          水库大坝安全鉴定一览表\n        </el-col>\n      </el-row>\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col-left\">\n          鉴定名称\n        </el-col>\n        <el-col :span=\"8\" class=\"from-border-right\">\n          <el-input :disabled=\"active != 1 || safetyAppraisal.fReviewResult\" v-model=\"safetyAppraisal.fAppraisalName\"\n            placeholder=\"请输入内容\"></el-input>\n        </el-col>\n        <el-col :span=\"3\" class=\"from-col-left\">\n          鉴定完成时间\n        </el-col>\n        <el-col :span=\"10\" style=\"text-align: center ;line-height: 40px;\">\n          <el-date-picker :disabled=\"active != 1 || safetyAppraisal.fReviewResult\"\n            v-model=\"safetyAppraisal.fAppraisalFinishDate\" type=\"date\" style=\"width: 40%;\" placeholder=\"完成时间\">\n          </el-date-picker>\n        </el-col>\n      </el-row>\n\n\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-borderibht\">\n          鉴定结论\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 400px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            鉴定结论：\n          </div>\n          <el-input  maxlength=\"500\" show-word-limit  :disabled=\"active != 1 || safetyAppraisal.fReviewResult\" type=\"textarea\" :rows=\"8\"\n            placeholder=\"请输入内容\" v-model=\"safetyAppraisal.fAppraisalResult\">\n          </el-input>\n          <div style=\"display:flex;justify-content:space-between;margin-top: 90px;\">\n            <div style=\"width: 200px;margin-top: -60px;margin-left: 20px;\">\n              <el-upload style=\"margin-left: 15px;margin-top: 15px\" class=\"upload-demo\" :headers=\"GLOBAL.headers()\"\n               :before-upload = \"beforeAvatarUpload\"\n                :action=\"GLOBAL.httpUrl\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\"\n                 multiple :on-success=\"uploadedSuccess\" :show-file-list=\"true\"\n                :auto-upload=\"true\" :limit=\"1\" :on-exceed=\"handleExceed\" :file-list=\"fileList\" :disabled=\"active != 1 || safetyAppraisal.fReviewResult\">\n                <el-button size=\"small\" type=\"primary\" :disabled=\"active != 1 || safetyAppraisal.fReviewResult\">点击上传</el-button>\n                <div slot=\"tip\" class=\"el-upload__tip\" style=\"margin-top: 15px\">上传文件不得超过100M</div>\n              </el-upload>\n            </div>\n            <div style=\"font-size: 20px;margin-right: 10px;margin-top: -5px;\">\n              <div style=\"text-align: left\">\n                <div style=\"display:inline;\">编制人：<el-input :disabled=\"active != 1 || safetyAppraisal.fReviewResult\"\n                    v-model=\"safetyAppraisal.fPreparedBy\" placeholder=\"请输入内容\"\n                    style=\"width:220px;border: 1px solid #DCDFE6;\"></el-input>\n                </div>\n                <div class=\"block\" style=\"transform:translateY(10%)\">\n                  <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                  <el-date-picker :disabled=\"active != 1 || safetyAppraisal.fReviewResult\" type=\"datetime\"\n                    style=\"border: 1px solid #DCDFE6;\" v-model=\"safetyAppraisal.fPreparationTime\" placeholder=\"选择日期\"\n                    format=\"yyyy 年 MM 月 dd 日\" value-format=\"yyyy-MM-dd HH:mm:ss\">\n                  </el-date-picker>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </el-col>\n      </el-row>\n\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col\" style=\"line-height:200px;\">\n          鉴定审核\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 50px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            审核意见：\n          </div>\n          <el-input  maxlength=\"500\" show-word-limit  :disabled=\"active != 2\" type=\"textarea\" :rows=\"4\" placeholder=\"请输入内容\"\n            v-model=\"safetyAppraisal.fReviewComments\">\n          </el-input>\n          <div class=\"from-select\">\n            <div style=\"margin-top: 20px;margin-left: 10px;\">\n              <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                审核结果：\n              </div>\n              <el-select :disabled=\"active != 2\" v-model=\"safetyAppraisal.fReviewResult\" placeholder=\"请选择\">\n                <el-option v-for=\"item in audit.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\"\n                  :value=\"item.dictValue\">\n                </el-option>\n              </el-select>\n            </div>\n            <div style=\"margin-top:20px;\">\n              <span>审核人：<el-input :disabled=\"active != 2\" v-model=\"safetyAppraisal.fReviewPeople\" placeholder=\"请输入内容\"\n                  style=\"width:180px;\">\n                </el-input></span>\n              <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                <el-date-picker :disabled=\"active != 2\" type=\"datetime\" v-model=\"safetyAppraisal.fReviewDate\"\n                  placeholder=\"选择日期\" format=\"yyyy 年 MM 月 dd 日\" value-format=\"yyyy-MM-dd HH:mm:ss\">\n                </el-date-picker>\n              </div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"3\" class=\"from-align\" style=\"line-height:200px;\">\n          鉴定批准\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 50px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            审批意见：\n          </div>\n          <el-input  maxlength=\"500\" show-word-limit  :disabled=\"active != 3\" type=\"textarea\" :rows=\"4\" placeholder=\"请输入内容\"\n            v-model=\"safetyAppraisal.fAuditComments\">\n          </el-input>\n          <div class=\"from-select\">\n            <div style=\"margin-top: 20px;margin-left: 10px;\">\n              <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                审批结果：\n              </div>\n              <el-select :disabled=\"active != 3\" v-model=\"safetyAppraisal.fAuditResult\" placeholder=\"请选择\">\n                <el-option v-for=\"item in audit.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\"\n                  :value=\"item.dictValue\">\n                </el-option>\n              </el-select>\n            </div>\n            <div style=\"margin-top:20px;\">\n              <span>审批人：<el-input :disabled=\"active != 3\" v-model=\"safetyAppraisal.fAuditPeople\" placeholder=\"请输入内容\"\n                  style=\"width:180px;\">\n                </el-input></span>\n              <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                <el-date-picker :disabled=\"active != 3\" type=\"datetime\" v-model=\"safetyAppraisal.fAuditDate\"\n                  placeholder=\"选择日期\" format=\"yyyy 年 MM 月 dd 日\" value-format=\"yyyy-MM-dd HH:mm:ss\">\n                </el-date-picker>\n              </div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n\n    <div class=\"from-div\" style=\"border: 0px\">\n      <div class=\"table-head\" style=\"margin-top:40px;margin:0 auto;width:100%\">\n        安全鉴定记录\n      </div>\n      <el-table :data=\"appraisalList\" class=\"from-top\" border style=\"margin:0 auto;width:100%\">\n        <el-table-column label=\" 序号\" align=\"center\" type=\"index\" width=\"300\" />\n        <el-table-column label=\"编制时间\" align=\"center\" prop=\"fPreparationTime\">\n          <template slot-scope=\"scope\">\n            <span>{{ parseTime(scope.row.fPreparationTime, '{y}-{m}-{d}') }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"编制人\" align=\"center\" prop=\"fPreparedBy\" />\n        <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"text\" @click=\"dialog(scope.row)\">\n              查看\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n\n\n\n    <el-dialog title=\"详情\" :visible.sync=\"dialogVisible\" width=\"1500px\">\n      <div class=\"from-div\">\n        <!-- <el-row>\n          <el-col :span=\"24\" class=\"from-div-title\" style=\"background-color: rgba(215, 215, 215, 1); text-align: right;\">\n            <div style=\"margin-right: 15px\">\n              <el-button type=\"primary\" size=\"small\">保存</el-button>\n              <el-button type=\"primary\" size=\"small\">下载</el-button>\n            </div>\n          </el-col>\n        </el-row> -->\n        <el-row>\n          <el-col :span=\"24\" class=\"from-div-title\">\n            水库大坝安全鉴定一览表\n          </el-col>\n        </el-row>\n        <el-row class=\"from-border-bottom\">\n          <el-col :span=\"3\" class=\"from-col-left\">\n            鉴定名称\n          </el-col>\n          <el-col :span=\"8\" class=\"from-border-right\">\n            <el-input  :disabled=\"disabled\"  v-model=\"safetyAppraisal.fAppraisalName\" placeholder=\"请输入内容\"></el-input>\n          </el-col>\n          <el-col :span=\"3\" class=\"from-col-left\">\n            鉴定完成时间\n          </el-col>\n          <el-col :span=\"10\" style=\"text-align: center ;line-height: 40px;\">\n            <el-date-picker  :disabled=\"disabled\"  v-model=\"safetyAppraisal.fAppraisalFinishDate\" type=\"date\" style=\"width: 40%;\"\n              placeholder=\"完成时间\">\n            </el-date-picker>\n          </el-col>\n        </el-row>\n\n\n        <el-row class=\"from-border-bottom\">\n          <el-col :span=\"3\" class=\"from-borderibht\">\n            鉴定结论\n          </el-col>\n          <el-col :span=\"21\" style=\"height: 400px;\">\n            <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n              鉴定结论：\n            </div>\n            <el-input  :disabled=\"disabled\"   maxlength=\"500\" show-word-limit  type=\"textarea\" :rows=\"8\" placeholder=\"请输入内容\" v-model=\"safetyAppraisal.fAppraisalResult\">\n            </el-input>\n            <div style=\"display:flex;justify-content:space-between;margin-top: 100px;\">\n              <div style=\"width: 200px;margin-left: 20px;\">\n                <!-- <div v-if=\"fileList[0]\">\n                  <el-link :href=\"fileList[0].url\" type=\"primary\">下载附件</el-link>\n                </div> -->\n\n                <div style=\"width: 200px;margin-top: -60px;margin-left: 20px;\">\n                  <el-upload style=\"margin-left: 15px;margin-top: 15px\" class=\"upload-demo\" :headers=\"GLOBAL.headers()\"\n                   :before-upload = \"beforeAvatarUpload\"\n                    :action=\"GLOBAL.httpUrl\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\"\n                     multiple :on-success=\"uploadedSuccess\" :show-file-list=\"true\"\n                    :auto-upload=\"true\" :limit=\"1\" :on-exceed=\"handleExceed\" :file-list=\"fileList\"  :disabled=\"disabled\" >\n                    <el-button size=\"small\" type=\"primary\"  :disabled=\"disabled\" >点击上传</el-button>\n                    <!-- <div slot=\"tip\" class=\"el-upload__tip\" style=\"margin-top: 15px\">上传文件不得超过100M</div> -->\n                  </el-upload>\n                </div>\n              </div>\n              <div style=\"font-size: 20px;margin-right: 10px;margin-top: -5px;\">\n                <div style=\"text-align: left\">\n                  <div style=\"display:inline;\">编制人：<el-input  :disabled=\"disabled\"  v-model=\"safetyAppraisal.fPreparedBy\" placeholder=\"请输入内容\"\n                      style=\"width:220px;border: 1px solid #DCDFE6;\"></el-input>\n                  </div>\n                  <div class=\"block\" style=\"transform:translateY(10%)\">\n                    <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                    <el-date-picker type=\"datetime\" style=\"border: 1px solid #DCDFE6;\"\n                      v-model=\"safetyAppraisal.fPreparationTime\" placeholder=\"选择日期\" format=\"yyyy 年 MM 月 dd 日\"\n                      value-format=\"yyyy-MM-dd HH:mm:ss\" :disabled=\"disabled\">\n                    </el-date-picker>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </el-col>\n        </el-row>\n\n        <el-row class=\"from-border-bottom\">\n          <el-col :span=\"3\" class=\"from-col\" style=\"line-height:200px;\">\n            鉴定审核\n          </el-col>\n          <el-col :span=\"21\" style=\"height: 50px;\">\n            <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n              审核意见：\n            </div>\n            <el-input  maxlength=\"500\"  :disabled=\"disabled\"  show-word-limit  type=\"textarea\" :rows=\"4\" placeholder=\"请输入内容\" v-model=\"safetyAppraisal.fReviewComments\">\n            </el-input>\n            <div class=\"from-select\">\n              <div style=\"margin-top: 20px;margin-left: 10px;\">\n                <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                  审核结果：\n                </div>\n                <el-select  :disabled=\"disabled\"  v-model=\"safetyAppraisal.fReviewResult\" placeholder=\"请选择\">\n                  <el-option v-for=\"item in audit.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\"\n                    :value=\"item.dictValue\">\n                  </el-option>\n                </el-select>\n              </div>\n              <div style=\"margin-top:20px;\">\n                <span>审核人：<el-input  :disabled=\"disabled\"  v-model=\"safetyAppraisal.fReviewPeople\" placeholder=\"请输入内容\" style=\"width:180px;\">\n                  </el-input></span>\n                <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                  <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                  <el-date-picker type=\"datetime\"   :disabled=\"disabled\" v-model=\"safetyAppraisal.fReviewDate\" placeholder=\"选择日期\"\n                    format=\"yyyy 年 MM 月 dd 日\" value-format=\"yyyy-MM-dd HH:mm:ss\" >\n                  </el-date-picker>\n                </div>\n              </div>\n            </div>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"3\" class=\"from-align\" style=\"line-height:200px;\">\n            鉴定批准\n          </el-col>\n          <el-col :span=\"21\" style=\"height: 50px;\">\n            <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n              审批意见：\n            </div>\n            <el-input maxlength=\"500\"  :disabled=\"disabled\"  show-word-limit  type=\"textarea\" :rows=\"4\" placeholder=\"请输入内容\" v-model=\"safetyAppraisal.fAuditComments\">\n            </el-input>\n            <div class=\"from-select\">\n              <div style=\"margin-top: 20px;margin-left: 10px;\">\n                <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                  审批结果：\n                </div>\n                <el-select v-model=\"safetyAppraisal.fAuditResult\" placeholder=\"请选择\" :disabled=\"disabled\" >\n                  <el-option v-for=\"item in audit.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\"\n                    :value=\"item.dictValue\">\n                  </el-option>\n                </el-select>\n              </div>\n              <div style=\"margin-top:20px;\">\n                <span>审批人：<el-input v-model=\"safetyAppraisal.fAuditPeople\" :disabled=\"disabled\" placeholder=\"请输入内容\" style=\"width:180px;\">\n                  </el-input></span>\n                <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                  <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                  <el-date-picker type=\"datetime\" v-model=\"safetyAppraisal.fAuditDate\" placeholder=\"选择日期\"\n                    format=\"yyyy 年 MM 月 dd 日\" value-format=\"yyyy-MM-dd HH:mm:ss\" :disabled=\"disabled\" >\n                  </el-date-picker>\n                </div>\n              </div>\n            </div>\n          </el-col>\n        </el-row>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import {\n    getDictByType,\n    startWorkFlow,\n    taskReview,\n    latelySafetyAppraisal,\n    listAppraisal,\n    getAppraisal,\n    delAppraisal,\n    addAppraisal,\n    updateAppraisal\n  } from \"@/api/security/appraisal.js\";\n  import {\n    getUserList,\n  } from \"@/api/security/planning\";\n  import {\n    getToken\n  } from \"@/utils/auth\";\n  import {\n    getFileById\n  } from \"@/api/file\";\n\n  export default {\n\n    data() {\n      return {\n        userList: [],\n        nextVisible: false,\n        audit: [],\n        disabled: true,\n        // 水库大坝安全鉴定一览 表格数据\n        appraisalList: [],\n        // 表单参数\n        safetyAppraisal: {\n          fAppraisalName: null,\n          fAppraisalFinishDate: null,\n          fAppraisalResult: null,\n          fPreparedBy: null,\n          fPreparationTime: null,\n          fResultFileId: null,\n          fReviewComments: null,\n          fReviewResult: null,\n          fReviewPeople: null,\n          fReviewDate: null,\n          fAuditComments: null,\n          fAuditResult: null,\n          fAuditPeople: null,\n          fAuditDate: null,\n          fActId: null,\n          fActPersion: null,\n          fActStatus: null,\n          fActNode: null\n        },\n        active: 1,\n        info: {\n          // stockDate: this.getNowTime(), //日期\n        },\n        dialogVisible: false,\n        textarea: '',\n        value1: '',\n        value2: '',\n        value3: '',\n        value4: '',\n        input: '',\n        value: '',\n        textarea1: '',\n        textarea2: '',\n        fileList: []\n      };\n    },\n    created() {\n      this.getList();\n      this.Personnel();\n      this.getLately();\n      this.getAudit();\n    },\n    methods: {\n      beforeAvatarUpload(file){\n            const isLt100M = file.size / 1024 / 1024 < 100;\n               if (!isLt100M) {\n                      this.$message.error('上传文件大小不能超过 100MB!');\n                      return false\n                  }\n            },\n      getFile() {\n        console.log('fileList = []');\n        this.fileList = [];\n        if (this.safetyAppraisal.fResultFileId) {\n          getFileById({\n            id: this.safetyAppraisal.fResultFileId\n          }).then(result => {\n            if (result) {\n              this.fileList = [{\n                name: result.data.fOldFileName,\n                url: result.data.fFilePath\n              }];\n            }\n          })\n        }\n      },\n      getAudit() {\n        getDictByType().then(response => {\n          this.audit = response.data\n        })\n      },\n      Personnel() {\n        getUserList().then(response => {\n          this.userList = response.data\n        })\n      },\n      addSubmits() {\n        if (this.active == 1) {\n          this.openStartWorkFlow()\n        } else {\n          this.openTaskReview();\n        }\n      },\n      openStartWorkFlow() {\n        if (this.safetyAppraisal.fAppraisalName == null) {\n          this.$message.error(\"请填写鉴定名称\")\n          return false\n        } else if (this.safetyAppraisal.fAppraisalFinishDate == null) {\n          this.$message.error(\"请填写鉴定完成时间\")\n          return false\n        } else if (this.safetyAppraisal.fAppraisalResult == null) {\n          this.$message.error(\"请填写鉴定结论\")\n          return false\n        } else if (this.safetyAppraisal.fPreparedBy == null) {\n          this.$message.error(\"请填写编制人\")\n          return false\n        } else if (this.safetyAppraisal.fPreparationTime == null) {\n          this.$message.error(\"请填写编制时间\")\n          return false\n        } else {\n          startWorkFlow(this.safetyAppraisal).then(response => {\n            this.msgSuccess(\"提交成功\");\n            this.getLately();\n            this.nextVisible = false;\n          });\n        }\n      },\n      openTaskReview() {\n        taskReview(this.safetyAppraisal).then(response => {\n          this.msgSuccess(\"提交成功\");\n          this.getLately();\n          this.nextVisible = false;\n        });\n      },\n      /** 新增按钮操作 */\n      handleAdd() {\n        this.active = 1;\n        this.safetyAppraisal = {};\n        this.fileList = [];\n      },\n      /** 查询水库大坝安全鉴定一览 列表 */\n      getList() {\n        listAppraisal(this.queryParams).then(response => {\n          this.appraisalList = response.rows;\n          this.total = response.total;\n        });\n      },\n      /** 获取最近 */\n      getLately() {\n        this.loading = true;\n        latelySafetyAppraisal().then(response => {\n          if (response.data) {\n            this.safetyAppraisal = response.data;\n            this.getFile();\n            if (this.safetyAppraisal.fActStatus == 3) {\n              this.active = 4;\n            } else if (this.safetyAppraisal.fActStatus == 2) {\n              this.active = 3;\n            } else if (this.safetyAppraisal.fActStatus == 1) {\n              this.active = 2;\n            } else {\n              this.active = 1;\n            }\n            this.loading = false;\n            if (this.safetyAppraisal.fReviewResult) {\n              this.safetyAppraisal.fReviewResult = this.safetyAppraisal.fReviewResult.toString();\n            }\n            if (this.safetyAppraisal.fAuditResult) {\n              this.safetyAppraisal.fAuditResult = this.safetyAppraisal.fAuditResult.toString();\n            }\n          }\n        });\n      },\n      dialog(row) {\n        this.dialogVisible = true;\n        this.safetyAppraisal = row;\n        this.safetyAppraisal.fReviewResult = row.fReviewResult.toString();\n        this.safetyAppraisal.fAuditResult = row.fAuditResult.toString();\n      },\n      uploadedSuccess(response, file, fileList) {\n        this.safetyAppraisal.fResultFileId = response.data.fId;\n        this.getFile();\n      },\n      handleRemove(file, fileList) {\n        this.GLOBAL.commonFun(this.safetyAppraisal.fResultFileId);\n        this.safetyAppraisal.fResultFileId = '';\n      },\n      handlePreview(file) {\n        // window.location.href = this.fileList[0].url;\r\n\t\twindow.open(this.fileList[0].url);\n      },\n      handleExceed(files, fileList) {\n        this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n      },\n      beforeRemove(file, fileList) {\n        return this.$confirm(`确定移除 ${file.name}？`);\n      }\n    }\n  };\n</script>\n<style lang=\"scss\">\n  .color409 {\n    color: #409eff;\n    cursor: pointer;\n  }\n</style>\n"]}]}