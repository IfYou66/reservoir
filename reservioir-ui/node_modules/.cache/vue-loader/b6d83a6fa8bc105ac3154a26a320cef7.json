{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\security\\planning.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\security\\planning.vue","mtime":1640419131156},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb2xvcjQwOSB7CiAgY29sb3I6ICM0MDllZmY7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouZWwtdXBsb2FkLWxpc3RfX2l0ZW0tbmFtZSB7CiAgZm9udC1zaXplOiAyMHB4Owp9CgoK"},{"version":3,"sources":["planning.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4rBA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"planning.vue","sourceRoot":"src/views/runManagement/security","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row class=\"from-top\">\n      <!-- <el-col :span=\"24\">\n        <div style=\"margin: 0 auto;display: flex;align-items: center;width: 100%;justify-content:center;\">\n          <div style=\"position: relative;\">\n            <img src=\"../../../assets/images/01s.png\"/>\n            <div  style=\"position: absolute;top: 17px;left: 23px;width: 50%;color: #FFFFFF;\">计划编制</div>\n          </div>\n          <div  style=\"position: relative; width: 30%;\">\n            <img :src=\"require(active>1? '../../../assets/images/04.png':'../../../assets/images/05.png')\"  style=\"width: 100%;\"/>\n            <img v-if=\"active==1\" :src=\"require(active==1? '../../../assets/images/07.gif':'../../../assets/images/06.gif')\" style=\"position: absolute;top: 0px;left: 150px;height: 80%;width: 10%;\"/>\n            </div>\n          <div  style=\"position: relative;\">\n            <img :src=\"require(active>1? '../../../assets/images/01s.png':'../../../assets/images/01.png')\" />\n            <div  :style=\"active>1? 'position: absolute;top: 17px;left: 23px;width: 50%;color: #FFFFFF;':'position: absolute;top: 17px;left: 23px;width: 50%;color: #999999;'\">计划审核</div>\n            </div>\n          <div  style=\"position: relative; width: 30%;\">\n            <img :src=\"require(active==3? '../../../assets/images/04.png':'../../../assets/images/05.png')\" style=\"width: 100%;\" />\n            <img v-if=\"active==2 || active==1\" :src=\"require(active==2? '../../../assets/images/07.gif':'../../../assets/images/06.gif')\" style=\"position: absolute;top: 0px;left: 150px;height: 80%;width: 10%;\"/>\n            </div>\n          <div   style=\"position: relative;\">\n            <img :src=\"require(active==3? '../../../assets/images/01s.png':'../../../assets/images/01.png')\" />\n            <div  :style=\"active>1? 'position: absolute;top: 17px;left: 23px;width: 50%;color: #FFFFFF;':'position: absolute;top: 17px;left: 23px;width: 50%;color: #999999;'\">计划批准</div>\n            </div>\n        </div>\n      </el-col> -->\n      <el-col :span=\"24\">\n        <div style=\"margin: 0 auto;display: flex;align-items: center;width: 100%;justify-content:center;\">\n          <div style=\"position: relative;\">\n            <img src=\"../../../assets/images/jin.png\"/>\n            <div style=\"position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;\">1.计划编制</div>\n          </div>\n          <div style=\"position: relative;\">\n            <img :src=\"require(active>1? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\"/>\n            <div\n              :style=\"active>1? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n              2.计划审核\n            </div>\n          </div>\n          <div style=\"position: relative;\">\n            <img :src=\"require(active>2? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\"/>\n            <div\n              :style=\"active>2? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n              3.计划批准\n            </div>\n          </div>\n          <div style=\"position: relative;\">\n            <img :src=\"require(active>3? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\"/>\n            <div\n              :style=\"active>3? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n              4.完成\n            </div>\n          </div>\n        </div>\n      </el-col>\n\n\n    </el-row>\n    <div class=\"from-div\">\n      <el-row>\n        <el-col :span=\"24\"\n                class=\"from-div-title\"\n                style=\"background-color: rgba(215, 215, 215, 1); text-align: right;\"\n        >\n          <div style=\"margin-right: 10px\">\n            <el-button type=\"primary\" size=\"small\" @click.native=\"addSubmitshow('1',0)\"\n                       v-if=\"active==1 && addFrom.fId == null || addFrom.fId == '' \">暂存\n            </el-button>\n            <el-button type=\"primary\" size=\"small\" @click.native=\"addSubmitshow('1',1)\" v-if=\"active==1\">提交</el-button>\n            <el-button type=\"primary\" size=\"small\" @click.native=\"addSubmitshow('2')\"\n                       v-if=\"active==2 && addFrom.landingPersonId != addFrom.fStartPersion\">审核\n            </el-button>\n            <el-button type=\"primary\" size=\"small\" @click.native=\"addSubmits()\"\n                       v-if=\"active==3 && addFrom.landingPersonId != addFrom.fStartPersion\">批准\n            </el-button>\n          </div>\n        </el-col>\n      </el-row>\n\n      <el-row>\n        <el-col :span=\"24\"\n                class=\"from-div-title\"\n        >\n          安全检查计划编制审批表\n        </el-col>\n      </el-row>\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col-left\">\n          计划名称\n        </el-col>\n        <el-col :span=\"8\" class=\"from-border-right\">\n          <el-input v-model=\"addFrom.fPlanName\" placeholder=\"请输入内容\" :disabled=\"active != 1\"></el-input>\n        </el-col>\n        <el-col :span=\"3\" class=\"from-col-left\">\n          计划类型\n        </el-col>\n        <el-col :span=\"3\" style=\"line-height: 40px;border-right: #a4d5ff 1px solid;\">\n          <div>\n            <el-select v-model=\"addFrom.fPlanType\" placeholder=\"请选择\" :disabled=\"active != 1\">\n              <el-option v-for=\"dict in dict.plantTypeList\" \n              \t :key=\"dict.dictValue\"\n            :label=\"dict.dictLabel\"\n            :value=\"dict.dictValue\" >\n              </el-option>\n            </el-select>\n          </div>\n        </el-col>\n\n        <el-col :span=\"3\" class=\"from-col-left\">\n          预算（元）\n        </el-col>\n        <el-col :span=\"4\" class=\"from-border-right\">\n          <el-input v-model=\"addFrom.fBudget\" placeholder=\"预算（元）\" :disabled=\"active != 1\"></el-input>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-borderibht\">\n          计划内容\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 400px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            计划概述：\n          </div>\n          <el-input type=\"textarea\" maxlength=\"500\" show-word-limit  :rows=\"8\" placeholder=\"请输入内容\" v-model=\"addFrom.fPlanContent\"\n                    :disabled=\"active != 1\">\n          </el-input>\n          <div style=\"display:flex;justify-content:space-between;margin-top: 70px;\">\n            <div style=\"width: 200px;margin-left: 20px;\">\n              <el-upload class=\"upload-demo\" style=\"font-size:100\" :action=\"GLOBAL.httpUrl\" multiple\n              :before-upload = \"beforeAvatarUpload\"\n                         :on-success=\"successResave\" ref=\"upload\" :headers=\"GLOBAL.headers()\" :limit=\"1\"\n                         :show-file-list=\"true\" :auto-upload=\"true\" :disabled=\"active != 1\" :on-remove=\"remove\"\n                         :file-list=\"addFrom.fileList\" :on-preview=\"handlePreview\">\n                <el-button :disabled=\"active != 1\" type=\"primary\">计划内容</el-button>\n\t\t\t\t<div slot=\"tip\" class=\"el-upload__tip\" style=\"margin-top: 15px\">上传文件不得超过100M</div>\n              </el-upload>\n            </div>\n\n            <div style=\"font-size: 20px;margin-right: 10px;margin-top: -10px;\">\n              <div style=\"text-align: left\">\n               <div style=\"display:inline;\">编制人：<el-input v-model=\"addFrom.fEditPersion\"  placeholder=\"请输入编制人名称\" style=\"width:220px;border: 1px solid #DCDFE6;\" :disabled=\"active != 1\"></el-input></div>\n                <div class=\"block\" style=\"transform:translateY(10%)\">\n                  <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\"/>\n                  <el-date-picker\n                    type=\"date\" style=\"border: 1px solid #DCDFE6;\"\n                    v-model=\"addFrom.fEditTime\"\n                    placeholder=\"选择日期\"\n                    format=\"yyyy-MM-dd\"\n                    value-format=\"yyyy-MM-dd\"\n                    :disabled=\"active != 1\">\n                  </el-date-picker>\n                </div>\n              </div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col\">\n          计划审核\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 50px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            审核意见：\n          </div>\n          <el-input  maxlength=\"500\" show-word-limit  type=\"textarea\" :rows=\"3\" placeholder=\"请输入内容\" v-model=\"addFrom.fAuditContent\"\n                    :disabled=\"active != 2\">\n          </el-input>\n          <div class=\"from-select\">\n            <div style=\"margin-left: 10px;\">\n              <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                审核结果：\n              </div>\n              <el-select v-model=\"addFrom.fAuditResult\" clearable placeholder=\"请选择\" :disabled=\"active != 2\">\n                <el-option v-for=\"item in dict.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\" :value=\"item.dictValue\">\n                </el-option>\n              </el-select>\n            </div>\n            <div>\n              <span>审核人：<el-input v-model=\"addFrom.fAuditPersion\" placeholder=\"请输入审核人名称\" style=\"width:180px;\"\n                                  :disabled=\"active != 2\"></el-input></span>\n              <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\"/>\n                <el-date-picker style=\"border: 1px solid #DCDFE6;\"\n                                value-format=\"yyyy-MM-dd\"\n                                v-model=\"addFrom.fAuditTime\"\n                                :disabled=\"active != 2\"\n                                type=\"date\"\n                                placeholder=\"选择日期时间\">\n                </el-date-picker>\n              </div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"from-border-bottom\">\n        <el-col :span=\"3\" class=\"from-col\">\n          计划批准\n        </el-col>\n        <el-col :span=\"21\" style=\"height: 50px;\">\n          <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n            审批意见：\n          </div>\n          <el-input  maxlength=\"500\" show-word-limit  type=\"textarea\" :rows=\"3\" placeholder=\"请输入内容\" v-model=\"addFrom.fApproveContent\"\n                    :disabled=\"active != 3\">\n          </el-input>\n          <div class=\"from-select\">\n            <div style=\"margin-left: 10px;\">\n              <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                审批结果：\n              </div>\n              <el-select v-model=\"addFrom.fApproveResult\" clearable placeholder=\"请选择\" :disabled=\"active != 3\">\n                <el-option v-for=\"item in dict.result\" :key=\"item.dictValue\" :label=\"item.dictLabel\" :value=\"item.dictValue\">\n                </el-option>\n              </el-select>\n            </div>\n            <div>\n              <span>审批人：<el-input v-model=\"addFrom.fApprovePersion\" :disabled=\"active != 3\" placeholder=\"请输入审批人名称\"\n                                  style=\"width:180px;\"></el-input></span>\n              <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\"/>\n\n                <el-date-picker style=\"border: 1px solid #DCDFE6;\"\n                                value-format=\"yyyy-MM-dd\"\n                                v-model=\"addFrom.fApproveTime\"\n                                :disabled=\"active != 3\"\n                                type=\"date\"\n                                placeholder=\"选择日期时间\">\n                </el-date-picker>\n              </div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <!--    <el-dialog-->\n    <!--      title=\"选择处理人\"-->\n    <!--      :visible.sync=\"dialogVisible\"-->\n    <!--      :modal=\"false\"-->\n    <!--      width=\"30%\">-->\n    <!--       <el-radio v-model=\"radio\" :label=\"item.userId\" v-for=\"(item,index) in list\" :key=\"index\">{{item.nickName}}</el-radio>-->\n    <!--        &lt;!&ndash; <el-radio v-model=\"radio\" label=\"2\">备选项</el-radio> &ndash;&gt;-->\n    <!--      <span slot=\"footer\" class=\"dialog-footer\">-->\n    <!--        <el-button @click=\"dialogVisible = false\">取 消</el-button>-->\n    <!--        <el-button type=\"primary\" @click=\"addSubmits\">确 定</el-button>-->\n    <!--      </span>-->\n    <!--    </el-dialog>-->\n  </div>\n</template>\n<script>\n// import {getToken} from \"@/utils/auth\";\nimport {\n  getUserList,\n  startWorkFlow,\n  getReviewTask,\n  submit,\n  taskReview,\n  taskApprove\n} from \"@/api/security/planning\";\nimport {\n  queryDataDictionary\n} from \"@/api/indemnification/training\";\n\nexport default {\n\n  props: ['fActId', 'fId', 'time'],\n\n  data() {\n    return {\n\n      dict: {\n        result: [],\n        plantTypeList:[] \n      },\n\n      addFrom: {\n        fId: null,\n        fPlanName: null,\n        fPlanType: null,\n        fBudget: null,\n        fPlanContent: null,\n        fEditPersion: null,\n        fEditTime: null,\n        fPlanId: null,\n        fAuditContent: null,\n        fAuditResult: null,\n        fAuditPersion: null,\n        fAuditTime: null,\n        fApproveContent: null,\n        fApproveResult: null,\n        fApprovePersion: null,\n        fApproveTime: null,\n        // 流程发起人\n        fStartPersion: null,\n      },\n      list: [],\n\n      // dialogVisible:false,\n      // radio:'',\n      // headers: {Authorization: \"Bearer \" + getToken()},\n\n      active: 1,\n\n      fileList: [],\n\n      holdOrSubmit: '',\n\n    };\n  },\n  watch: {\n    fActId(val, newval) {\n      this.getReviewTask()\n    },\n    time(val, newval) {\n      this.getReviewTask()\n    },\n    fId(val, newval) {\n      this.getReviewTask()\n    }\n  },\n  created() {\n    if (this.fId) {\n      this.getReviewTask()\n    }\n    //计划类型\n \t\tthis.getDicts(\"plan_type\").then(response => {\n      this.dict.plantTypeList = response.data;\n    });\n    this.queryDataDictionary()\n    this.Personnel()\n  },\n\n\n  methods: {\n    beforeAvatarUpload(file){\n    const isLt100M = file.size / 1024 / 1024 < 100;\n       if (!isLt100M) {\n              this.$message.error('上传文件大小不能超过 100MB!');\n              return false\n          }\n    },\r\n\t  handlePreview(file) {\n      if(!file.url){\n\t  \t// window.location.href = file.response.data.fFilePath;\r\n\t\twindow.open(file.response.data.fFilePath);\n      } else {\n        window.open(file.url); \n      }\n\t  },\n\n    Personnel() {\n      getUserList().then(response => {\n        this.list = response.data\n      })\n    },\n    successResave(response, file, fileList) {\n      this.addFrom.fPlanId = response.data.fId\n    },\n    remove(file, fileList) {\n      this.GLOBAL.commonFun(this.addFrom.fPlanId)\n    },\n    clearOut() {\n      this.active = 1\n      this.addFrom = {\n        fPlanName: null,\n        fPlanType: null,\n        fBudget: null,\n        fPlanContent: null,\n        fEditPersion: null,\n        fEditTime: null,\n        fPlanId: null,\n        fAuditContent: null,\n        fAuditResult: null,\n        fAuditPersion: null,\n        fAuditTime: null,\n        fApproveContent: null,\n        fApproveResult: null,\n        fApprovePersion: null,\n        fApproveTime: null,\n      },\n        this.addFrom.fileList = []\n    },\n\n\n    addSubmitshow(val, type) {\n      if (val == '1') {\n        if (this.addFrom.fPlanName == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写计划名称',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fPlanType == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写计划类型',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fBudget == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写计划预算',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fPlanContent == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写计划概述',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fEditPersion == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写编制人',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fEditTime == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写时间',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fPlanId == null) {\n          this.$message({\n            showClose: true,\n            message: '请上传文件',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.active > 1) {\n          this.$message({\n            showClose: true,\n            message: '此状态无法提交',\n            type: 'error'\n          });\n          return false\n        }\n        this.holdOrSubmit = type\n        // if (type == 1) {\n        //   this.dialogVisible = true;\n        // } else {\n        this.addSubmits()\n        // }\n      }\n      if (val == '2') {\n        if (this.addFrom.fAuditContent == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写审核意见',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fAuditResult == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写审核结果',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fAuditPersion == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写审核人',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fAuditTime == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写时间',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.active > 2) {\n          this.$message({\n            showClose: true,\n            message: '此状态无法提交',\n            type: 'error'\n          });\n          return false\n        }\n        // this.dialogVisible = true\n        this.addSubmits()\n      }\n\n    },\n\n    addSubmits() {\n      // if(this.active!=3){\n      //   if (this.holdOrSubmit == 1) {\n      //     if (this.radio == '') {\n      //       this.$message({\n      //         showClose: true,\n      //         message: '请选择审批人',\n      //         type: 'error'\n      //       });\n      //       return false\n      //     }\n      //   }\n      // }\n\n      if (this.active == 3) {\n        if (this.addFrom.fApproveContent == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写批准意见',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fApproveResult == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写批准结果',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fApprovePersion == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写批准人',\n            type: 'error'\n          });\n          return false\n        }\n        if (this.addFrom.fApproveTime == null) {\n          this.$message({\n            showClose: true,\n            message: '请填写批准时间',\n            type: 'error'\n          });\n          return false\n        }\n      }\n\n      console.log('549+64', this.active)\n      if (this.active == 1) {\n        console.log('222222+64')\n        var params = {\n          fId: this.addFrom.fId,\n          // fActPersion:this.radio,\n          fPlanName: this.addFrom.fPlanName,\n          fPlanType: this.addFrom.fPlanType,\n          fBudget: this.addFrom.fBudget,\n          fPlanContent: this.addFrom.fPlanContent,\n          fEditPersion: this.addFrom.fEditPersion,\n          fEditTime: this.addFrom.fEditTime,\n          fPlanId: this.addFrom.fPlanId,\n          // 提交或暂存\n          holdOrSubmit: this.holdOrSubmit,\n        }\n        if (this.addFrom.fId) {\n          // 提交接口\n          submit(params).then(res => {\n            if (res.code == 200) {\n              this.clearOut()\n              // this.dialogVisible = false\n              this.msgSuccess(\"提交成功\");\n              // 调用父组件方法关闭弹窗\n              this.$emit(\"shut\", false);\n              // 调用父组件方法查询列表\n              this.$emit(\"search\")\n            }\n          });\n        } else {\n          // 保存接口\n          startWorkFlow(params).then(response => {\n            if (response.code == 200) {\n              this.clearOut()\n              // this.dialogVisible = false\n              if (this.holdOrSubmit == 1) {\n                this.msgSuccess(\"提交成功\");\n              } else {\n                this.msgSuccess(\"暂存成功\");\n              }\n              // 调用父组件方法关闭弹窗\n              this.$emit(\"shut\", false);\n              // 调用父组件方法查询列表\n              this.$emit(\"search\")\n              // this.getReviewTask()\n            }\n\n          })\n        }\n      }\n      if (this.active == 2) {\n        var params = {\n          fId: this.addFrom.fId,\n          // fActPersion:this.radio,\n          fActId: this.addFrom.fActId,\n          fAuditContent: this.addFrom.fAuditContent,\n          fAuditResult: this.addFrom.fAuditResult,\n          fAuditPersion: this.addFrom.fAuditPersion,\n          fAuditTime: this.addFrom.fAuditTime,\n          auditStatus: this.addFrom.fAuditResult,\n        }\n        taskReview(params).then(response => {\n          if (response.code == 200) {\n            this.clearOut()\n            // this.dialogVisible = false\n            this.msgSuccess(\"审核成功\");\n            // 调用父组件方法关闭弹窗\n            this.$emit(\"shut\", false)\n            // 调用父组件方法查询列表\n            this.$emit(\"search\")\n            // this.getReviewTask()\n          }\n        })\n\n      }\n\n      if (this.active == 3) {\n        var params = {\n          fId: this.addFrom.fId,\n          // fActPersion:this.radio,\n          fActId: this.addFrom.fActId,\n          fApproveContent: this.addFrom.fApproveContent,\n          fApproveResult: this.addFrom.fApproveResult,\n          fApprovePersion: this.addFrom.fApprovePersion,\n          fApproveTime: this.addFrom.fApproveTime,\n          auditStatus: this.addFrom.fApproveResult,\n        }\n        taskApprove(params).then(response => {\n          if (response.code == 200) {\n            this.clearOut()\n            // this.dialogVisible = false\n            this.msgSuccess(\"批准成功\");\n            // 调用父组件方法关闭弹窗\n            this.$emit(\"shut\", false)\n            // 调用父组件方法查询列表\n            this.$emit(\"search\")\n            // this.getReviewTask()\n          }\n        })\n\n      }\n\n    },\n    getReviewTask() {\n      var params = {\n        fActId: this.fActId,\n        fId: this.fId\n      }\n      getReviewTask(params).then(response => {\n        if (response.data) {\n          this.active = response.data.fActStatus\n          this.addFrom = response.data\n          if (this.addFrom.fPlanType != null) {\n            this.addFrom.fPlanType = this.addFrom.fPlanType.toString()\n          }\n          if (this.addFrom.fAuditResult != null) {\n            this.addFrom.fAuditResult = this.addFrom.fAuditResult.toString()\n          }\n          if (this.addFrom.fApproveResult != null) {\n            this.addFrom.fApproveResult = this.addFrom.fApproveResult.toString()\n          }\n          this.addFrom.fileList = [{\n            name: null,\n            url: null\n          }];\n          if (this.addFrom.sysFile) {\n            this.addFrom.fileList[0].name = this.addFrom.sysFile.fOldFileName\n            this.addFrom.fileList[0].url = this.addFrom.sysFile.fFilePath\n          }\n        }\n      })\n    },\n\n    queryDataDictionary() {\n      queryDataDictionary().then(res => {\n        this.dict.result = res.data.result\n      });\n    },\n\n  }\n};\n</script>\n<style lang=\"scss\">\n.color409 {\n  color: #409eff;\n  cursor: pointer;\n}\n\n.el-upload-list__item-name {\n  font-size: 20px;\n}\n\n\n</style>\n"]}]}