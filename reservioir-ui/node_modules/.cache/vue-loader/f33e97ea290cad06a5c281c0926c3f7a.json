{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\safetyManagement\\Management\\management.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\safetyManagement\\Management\\management.vue","mtime":1640419132375},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29sb3I0MDkgewogIGNvbG9yOiAjNDA5ZWZmOwogIGN1cnNvcjogcG9pbnRlcjsKfQo="},{"version":3,"sources":["management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAshCA;AACA;AACA;AACA","file":"management.vue","sourceRoot":"src/views/safetyManagement/Management","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 查询 条件查询 -->\n    <el-form :model=\"queryParams\" ref=\"queryParam\" v-show=\"showSearch\" :inline=\"true\">\n \t\t\t<!-- 查询 <预案分类> 选择 -->\n      <el-form-item label=\"预案分类\" prop=\"fActStatus\">\n        <el-select v-model=\"queryParams.fPlanType\" placeholder=\"预案分类\" clearable size=\"small\" style=\"width: 240px\">\n          <el-option v-for=\"(item,index) in approvalPlanType\" :key=\"index\" :label=\"item.dictLabel\" :value=\"item.dictValue\" />\n        </el-select>\n      </el-form-item>\n      <!-- 查询 <名称> 模糊查询 -->\n      <el-form-item label=\"名称\" prop=\"fPlanName\">\n        <el-input v-model=\"queryParams.fPlanName\" placeholder=\"请输入计划名称\" clearable size=\"small\" style=\"width: 240px\"\n                  @keyup.enter.native=\"handleQuery\" />\n      </el-form-item>\n\n      <!-- 查询 <状态> 选择 -->\n      <el-form-item label=\"状态\" prop=\"fActStatus\">\n        <el-select v-model=\"queryParams.fActStatus\" placeholder=\"状态\" clearable size=\"small\" style=\"width: 240px\">\n          <el-option v-for=\"(item,index) in approvalStatus\" :key=\"index\" :label=\"item.dictLabel\" :value=\"item.dictValue\" />\n        </el-select>\n      </el-form-item>\n\n\n\n      <!-- 查询 <搜索> <重置> 按钮 -->\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n\n    </el-form>\n\n    <!-- 列表数据 显示 -->\n    <el-table v-loading=\"loading\" :data=\"data\" border>\n\n      <el-table-column label=\"序号\" align=\"center\" prop=\"id\" width=\"120\">\n        <template scope=\"scope\">\n          <span>{{ (scope.$index + 1)}} </span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"预案名称\" align=\"center\" prop=\"fPlanName\" :show-overflow-tooltip=\"true\" />\n      <el-table-column label=\"编号\" align=\"center\" prop=\"fPlanNumber\" :show-overflow-tooltip=\"true\" />\n      <el-table-column label=\"执行时间\" align=\"center\" prop=\"fPublishStartDate\" :show-overflow-tooltip=\"true\" />\n      <el-table-column label=\"预案说明\" align=\"center\" prop=\"fPlanSummary\" />\n\n      <el-table-column label=\"状态\" align=\"center\">\n        <template scope=\"scope\">\n          <span v-if=\"scope.row.fActStatus === 0\">待提交</span>\n          <span v-if=\"scope.row.fActStatus === 1\">待审核</span>\n          <span v-if=\"scope.row.fActStatus === 2\">待批准</span>\n          <span v-if=\"scope.row.fActStatus === 3\">待发布</span>\n          <span v-if=\"scope.row.fActStatus === 4\">待演练</span>\n          <span v-if=\"scope.row.fActStatus === 5\">待执行</span>\n          <span v-if=\"scope.row.fActStatus === 6\">已执行</span>\n          <span v-if=\"scope.row.fActStatus === 7\">已驳回</span>\n          <span v-if=\"scope.row.fActStatus === 8\">不通过</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"分类\" align=\"center\">\n        <template scope=\"scope\">\n<!--          <span v-if=\"scope.row.fPlanType === 0\">水库大坝管理运行预案</span>\n          <span v-if=\"scope.row.fPlanType === 1\">水库防汛抢险应急预案</span>\n          <span v-if=\"scope.row.fPlanType === 2\">水库防御洪水预案</span> -->\n\n          <span v-if=\"scope.row.fPlanType == item.dictValue\"   v-for=\"(item,index) in approvalPlanType\" :key=\"index\">{{item.dictLabel}}</span>\n\n          <!-- <el-select v-model=\"queryParams.fPlanType\" placeholder=\"预案分类\" clearable size=\"small\" style=\"width: 240px\">\n            <el-option v-for=\"(item,index) in approvalPlanType\" :key=\"index\" :label=\"item.dictLabel\" :value=\"item.dictValue\" />\n          </el-select> -->\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\" v-if=\"scope.row.fActStatus == 0 \">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.row)\">\n              提交\n            </el-button>\n          </div>\n\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\" v-if=\"scope.row.fActStatus == 1 \">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.row)\">\n              审核\n            </el-button>\n          </div>\n\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\" v-if=\"scope.row.fActStatus == 2 \">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.row)\">\n              批准\n            </el-button>\n          </div>\n\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\" v-if=\"scope.row.fActStatus == 3 \">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.row)\">\n              发布\n            </el-button>\n          </div>\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\" v-if=\"scope.row.fActStatus == 4 \">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.row)\">\n              演练\n            </el-button>\n          </div>\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\" v-if=\"scope.row.fActStatus == 5 \">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.row)\">\n              执行\n            </el-button>\n          </div>\n\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\" v-if=\"scope.row.fActStatus == 7 \">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.row)\">\n              修改\n            </el-button>\n          </div>\n\n          <div style=\"overflow: auto;display: inline;margin-left:20px;\">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleLook(scope.row)\">\n              详情\n            </el-button>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-col :span=\"24\" :xs=\"24\">\n      <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParams.pageNum\" :limit.sync=\"queryParams.pageSize\"\n                  @pagination=\"getList\" />\n    </el-col>\n\n    <el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"1500px\" @close=\"initZi\">\n      <EstablishmentCopy @show=\"show\" :emergencyPass='emergency' :status=\"status\" :fileList=\"fileList\" :fileList2=\"fileList2\" :fileList3=\"fileList3\" :fileList4=\"fileList4\"></EstablishmentCopy>\n    </el-dialog>\n\n    <el-dialog title=\"提示\" :visible.sync=\"dialogVisible1\" width=\"1500px\" @close=\"initZi\">\n      <EstablishmentCopy2 :emergencyPass='emergency' :status=\"status\" :fileList=\"fileList\" :fileList2=\"fileList2\" :fileList3=\"fileList3\" :fileList4=\"fileList4\"></EstablishmentCopy2>\n    </el-dialog>\n\n    <!-- 下一流程 处理人 弹窗 -->\n    <el-dialog title=\"选择处理人\" :visible.sync=\"nextVisible\" width=\"700px\">\n      <el-radio v-model=\"radio\" :label=\"item.userId\" v-for=\"(item,index) in list\" :key=\"index\">{{item.nickName}}\n      </el-radio>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"nextVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addSubmits\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport EstablishmentCopy from './establishmentCopy.vue'\nimport EstablishmentCopy2 from './establishmentCopy2.vue'\nimport {\n  getUserList\n} from \"@/api/security/planning\"\nimport {\n  listPlanning,\n  getPlanning,\n  delPlanning,\n  addPlanning,\n  updatePlanning,\n  planDataQuery\n} from \"@/api/emergency/emergency\";\n//文件上传\nimport {\n  getFileById\n} from \"@/api/file\";\n//获得 Token\nimport {\n  getToken\n} from \"@/utils/auth\";\nexport default {\n  components: {\n    EstablishmentCopy,\n    EstablishmentCopy2\n  },\n  data() {\n    return {\n      //调用子组件 用1 不用 0\n      status: 0,\n      //预案编制对象\n      emergency: {\n\n        //预案编制ID\n        fId: '',\n        //预案分类\n        fPlanType:'',\n        //预案名称\n        fPlanName: '',\n        //预案编号\n        fPlanNumber: '',\n        //发布开始时间\n        fPublishStartDate: '',\n        //发布结束时间\n        fPublishEndDate: '',\n        //预案概述\n        fPlanSummary: '',\n        //编制时间\n        fPreparationTime: '',\n        //编制人\n        fPreparedBy: '',\n\n        //预案文件ID\n        fPlanFileId: '',\n\n        //审核意见\n        fReviewComments: '',\n        //审核结果\n        fReviewResult: '',\n        //审核人\n        fReviewPeople: '',\n        //审核时间\n        fReviewDate: '',\n\n        //审批意见\n        fAuditComments: '',\n        //审批结果\n        fAuditResult: '',\n        //审批人\n        fAuditPeople: '',\n        //审批时间\n        fAuditDate: '',\n\n        //发布内容\n        fPublishContent: '',\n        //发布人\n        fPublishPeople: '',\n        //发布确认时间\n        fPublishConfirmDate: '',\n\n\n        //演练概述\n        fDrillOutline:'',\n        //演练文件ID\n        fDrillFileId:'',\n        //演练记录人\n        fDrillPeople:'',\n        //演练时间\n        fDrillDate:'',\n\n        //执行启动记录\n        fExecutiveStartRecord:'',\n        //执行过程\n        fExecutiveProcessRecord:'',\n        //执行终止记录\n        fExecutiveEndRecord:'',\n        //执行文件ID\n        fExecutiveFileId:'',\n        //执行记录人\n        fExecutivePeople:'',\n        //执行时间\n        fExecutiveDate:'',\n\n\n        //流程实例ID\n        fActId: '',\n        //下一节点审核人\n        fActPersion: '',\n        //流程状态 0：暂存 1：已提交启动 2：批准中 3：发布 4：发布完成 5：驳回 6：不同意删除\n        fActStatus: '',\n        //流程节点\n        fActNode: '',\n\n        //创建人\n        fCreateBy: '',\n        //创建时间\n        fCreateTime: '',\n\n      },\n      //预案编制对象\n      emergencyInit: {\n\n        //预案编制ID\n        fId: '',\n        //预案分类\n        fPlanType:'',\n        //预案名称\n        fPlanName: '',\n        //预案编号\n        fPlanNumber: '',\n        //发布开始时间\n        fPublishStartDate: '',\n        //发布结束时间\n        fPublishEndDate: '',\n        //预案概述\n        fPlanSummary: '',\n        //编制时间\n        fPreparationTime: '',\n        //编制人\n        fPreparedBy: '',\n\n        //预案文件ID\n        fPlanFileId: '',\n\n        //审核意见\n        fReviewComments: '',\n        //审核结果\n        fReviewResult: '',\n        //审核人\n        fReviewPeople: '',\n        //审核时间\n        fReviewDate: '',\n\n        //审批意见\n        fAuditComments: '',\n        //审批结果\n        fAuditResult: '',\n        //审批人\n        fAuditPeople: '',\n        //审批时间\n        fAuditDate: '',\n\n        //发布内容\n        fPublishContent: '',\n        //发布人\n        fPublishPeople: '',\n        //发布确认时间\n        fPublishConfirmDate: '',\n\n\n        //演练概述\n        fDrillOutline:'',\n        //演练文件ID\n        fDrillFileId:'',\n        //演练记录人\n        fDrillPeople:'',\n        //演练时间\n        fDrillDate:'',\n\n        //执行启动记录\n        fExecutiveStartRecord:'',\n        //执行过程\n        fExecutiveProcessRecord:'',\n        //执行终止记录\n        fExecutiveEndRecord:'',\n        //执行文件ID\n        fExecutiveFileId:'',\n        //执行记录人\n        fExecutivePeople:'',\n        //执行时间\n        fExecutiveDate:'',\n\n\n\n        //流程实例ID\n        fActId: '',\n        //下一节点审核人\n        fActPersion: '',\n        //流程状态 0：暂存 1：已提交启动 2：批准中 3：发布 4：发布完成 7：驳回 8：不同意删除\n        fActStatus: '',\n        //流程节点\n        fActNode: '',\n\n        //创建人\n        fCreateBy: '',\n        //创建时间\n        fCreateTime: '',\n\n      },\n      //处理人 集合\n      list: '',\n      nextVisible: false,\n      dialogVisible: false,\n      // 遮罩层\n      loading: false,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 数据\n      data: [],\n\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        planName: undefined,\n        status: undefined,\n        planType:undefined\n      },\n\n\n      approvalStatus: [],\n      approvalPlanType:[],\n\n      //当前页码\n      pageNum: 1,\n      //当前页大小\n      pageSize: 10,\n      radio: '',\n      //文件集合\n      fileList: [],\n      fileList2: [],\n      fileList3: [],\n      fileList4: [],\n\n      //详情弹窗\n      dialogVisible1: false,\n    };\n  },\n  created() {\n    this.getList()\n    this.personnel()\n    this.dataQuery()\n    this.dataQuerys()\n  },\n  methods: {\n    show(){\n      this.tijiao();\n    },\n    dataQuery() {\n      var query = { dictType: 'Plan_Classification' }\n      planDataQuery(query).then(res => {\n        if (res.code == 200) {\n          this.approvalPlanType = res.data\n        }\n      });\n    },\n    dataQuerys() {\n      var query = { dictType: 'Plan_Status' }\n      planDataQuery(query).then(res => {\n        if (res.code == 200) {\n          this.approvalStatus = res.data\n        }\n      });\n    },\n    //获取处理人集合\n    personnel() {\n      console.log('获取处理人集合')\n      getUserList().then(response => {\n        console.log('获取处理人集合执行成功', response)\n        this.list = response.data\n      })\n    },\n    //获取 <列表数据>\n    getList() {\n      listPlanning(this.queryParams).then(res => {\n        if (res.code == 200) {\n          console.log(\"查询列表成功\", res)\n          this.data = res.rows\n          this.total = res.total\n        }\n      })\n\n    },\n    initZi() {\n      console.log(\"关闭了\")\n      this.getList()\n      this.fileList = []\n      this.fileList2 = []\n      this.fileList3 = []\n      this.fileList4 = []\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.pageNum = 1;\n      this.getList();\n    },\n\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.queryParams.fActStatus = ''\n      this.queryParams.fPlanName = ''\n      //this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    //操作按钮\n    handleUpdate(val) {\n      console.log(this.emergency.fActStatus)\n      if (val.fPlanFileId) {\n        getFileById({\n          id: val.fPlanFileId\n        }).then(result => {\n          if (result) {\n            this.fileList = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      if (val.fAuditFileId) {\n        getFileById({\n          id: val.fAuditFileId\n        }).then(result => {\n          if (result) {\n            this.fileList2 = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      if (val.fDrillFileId) {\n        getFileById({\n          id: val.fDrillFileId\n        }).then(result => {\n          if (result) {\n            this.fileList3 = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      if (val.fExecutiveFileId) {\n        getFileById({\n          id: val.fExecutiveFileId\n        }).then(result => {\n          if (result) {\n            this.fileList4 = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      this.emergency = val\n      this.status = 1\n      this.dialogVisible = true\n    },\n    //详情\n    handleLook(val) {\n      if (val.fPlanFileId) {\n        getFileById({\n          id: val.fPlanFileId\n        }).then(result => {\n          if (result) {\n            this.fileList = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      if (val.fAuditFileId) {\n        getFileById({\n          id: val.fAuditFileId\n        }).then(result => {\n          if (result) {\n            this.fileList2 = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      if (val.fDrillFileId) {\n        getFileById({\n          id: val.fDrillFileId\n        }).then(result => {\n          if (result) {\n            this.fileList3 = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      if (val.fExecutiveFileId) {\n        getFileById({\n          id: val.fExecutiveFileId\n        }).then(result => {\n          if (result) {\n            this.fileList4 = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n          }\n        })\n      }\n      this.emergency = val\n      this.emergency.fActStatus = 10\n      this.status = 1\n      this.dialogVisible1 = true\n    },\n    //暂存  提交\n    tijiao() {\n      console.log(this.emergency.fActStatus)\n      //判断是否为 <暂存> 状态\n      if (this.emergency.fActStatus == 0 || this.emergency.fActStatus == 7) {\n        //是否填写 预案名称\n        if (this.emergency.fPlanName == null || this.emergency.fPlanName == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写预案名称',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 预案编号\n        if (this.emergency.fPlanNumber == null || this.emergency.fPlanNumber == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写预案编号',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布开始时间\n        if (this.emergency.fPublishStartDate == null || this.emergency.fPublishStartDate == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择发布开始时间',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布结束时间\n        if (this.emergency.fPublishEndDate == null || this.emergency.fPublishEndDate == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择发布结束时间',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 预案概述\n        if (this.emergency.fPlanSummary == null || this.emergency.fPlanSummary == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写预案概述',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 编制时间\n        if (this.emergency.fPreparationTime == null || this.emergency.fPreparationTime == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择编制时间',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 编制人\n        if (this.emergency.fPreparedBy == null || this.emergency.fPreparedBy == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写编制人',\n            type: 'error'\n          });\n          return false\n        }\n        //打开处理人 弹窗\n        this.addSubmits();\n      }\n      //判断是否为 <待审核> 状态\n      else if (this.emergency.fActStatus == 1) {\n        //是否填写 审核意见\n        if (this.emergency.fReviewComments == null || this.emergency.fReviewComments == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审核意见',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 审核结果\n        if (this.emergency.fReviewResult == null || this.emergency.fReviewResult == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择审核结果',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 审核人\n        if (this.emergency.fReviewPeople == null || this.emergency.fReviewPeople == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审核人',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 审核时间\n        if (this.emergency.fReviewDate == null || this.emergency.fReviewDate == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择审核时间',\n            type: 'error'\n          });\n          return false\n        }\n        //审核结果  为 通过\n        if (this.emergency.fReviewResult == 1) {\n          //打开处理人 弹窗\n          this.addSubmits();\n        }\n        //审核结果 为 不通过\n        else if (this.emergency.fReviewResult == 2) {\n          //将状态 变为 不同意删除\n          this.emergency.fActStatus = 8\n          updatePlanning(this.emergency).then(res => {\n            if (res.code == 200) {\n              this.msgSuccess(\"审核提交成功\")\n              this.dialogVisible = false\n              this.nextVisible = false\n              this.getList()\n            }\n          })\n        }\n        //审核结果 为 驳回\n        else if (this.emergency.fReviewResult == 3) {\n          //将状态 变为 不同意删除\n          this.emergency.fActStatus = 7\n          updatePlanning(this.emergency).then(res => {\n            if (res.code == 200) {\n              this.msgSuccess(\"审核提交成功\")\n              this.dialogVisible = false\n              this.nextVisible = false\n              this.getList()\n            }\n          })\n        }\n\n      }\n      //判断是否为 <待批准> 状态\n      else if (this.emergency.fActStatus == 2) {\n        //是否填写 审批意见\n        if (this.emergency.fAuditComments == null || this.emergency.fAuditComments == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审批意见',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 审批结果\n        if (this.emergency.fAuditResult == null || this.emergency.fAuditResult == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择审批结果',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 审批人\n        if (this.emergency.fAuditPeople == null || this.emergency.fAuditPeople == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审批人',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 审批时间\n        if (this.emergency.fAuditDate == null || this.emergency.fAuditDate == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择审批时间',\n            type: 'error'\n          });\n          return false\n        }\n        //审批结果  为 通过\n        if (this.emergency.fAuditResult == 1) {\n          //打开处理人 弹窗\n          this.addSubmits();\n        }\n        //审批结果 为 不通过\n        else if (this.emergency.fAuditResult == 2) {\n          //将状态 变为 不同意删除\n          this.emergency.fActStatus = 8\n          updatePlanning(this.emergency).then(res => {\n            if (res.code == 200) {\n              this.msgSuccess(\"审批提交成功\")\n              this.dialogVisible = false\n              this.nextVisible = false\n              this.getList()\n            }\n          })\n        }\n        //审核结果 为 驳回\n        else if (this.emergency.fAuditResult == 3) {\n          //将状态 变为 不同意删除\n          this.emergency.fActStatus = 7\n          updatePlanning(this.emergency).then(res => {\n            if (res.code == 200) {\n              this.msgSuccess(\"审批提交成功\")\n              this.dialogVisible = false\n              this.nextVisible = false\n              this.getList()\n            }\n          })\n        }\n\n      }\n      //判断是否为 <待发布> 状态\n      else if (this.emergency.fActStatus == 3) {\n        //是否填写 发布内容\n        if (this.emergency.fPublishContent == null || this.emergency.fPublishContent == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写预案发布内容',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布人\n        if (this.emergency.fPublishPeople == null || this.emergency.fPublishPeople == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写发布人',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布确认时间\n        if (this.emergency.fPublishConfirmDate == null || this.emergency.fPublishConfirmDate == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择预案发布时间',\n            type: 'error'\n          });\n          return false\n        }\n        //将状态 变为 发布完成\n        this.emergency.fActStatus = 4\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"预案发布成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //判断是否为 <待演练> 状态\n      else if (this.emergency.fActStatus == 4) {\n        //是否填写 发布内容\n        if (this.emergency.fDrillOutline == null || this.emergency.fDrillOutline == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写演练概述内容',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布人\n        if (this.emergency.fDrillPeople == null || this.emergency.fDrillPeople == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写演练记录人',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布确认时间\n        if (this.emergency.fDrillDate == null || this.emergency.fDrillDate == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择演练时间',\n            type: 'error'\n          });\n          return false\n        }\n        //将状态 变为 演练完成\n        this.emergency.fActStatus = 5\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"演练成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //判断是否为 <待执行> 状态\n      else if (this.emergency.fActStatus == 5) {\n        //是否填写 发布内容\n        if (this.emergency.fExecutiveStartRecord == null || this.emergency.fExecutiveStartRecord == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写执行启动内容',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布人\n        if (this.emergency.fExecutiveProcessRecord == null || this.emergency.fExecutiveProcessRecord == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写执行过程',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布确认时间\n        if (this.emergency.fExecutiveEndRecord == null || this.emergency.fExecutiveEndRecord == '') {\n          this.$message({\n            showClose: true,\n            message: '填写执行终止记录',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布确认时间\n        if (this.emergency.fExecutivePeople == null || this.emergency.fExecutivePeople == '') {\n          this.$message({\n            showClose: true,\n            message: '填写执行记录人',\n            type: 'error'\n          });\n          return false\n        }\n        //是否填写 发布确认时间\n        if (this.emergency.fExecutiveDate == null || this.emergency.fExecutiveDate == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择执行时间',\n            type: 'error'\n          });\n          return false\n        }\n        //将状态 变为 已执行\n        this.emergency.fActStatus = 6\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"执行成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n    },\n    addSubmits() {\n      //  表单 提交\n      if (this.emergency.fActStatus == 0) {\n        //将状态 变为 待审核\n        this.emergency.fActStatus = 1\n        //存放 处理人\n        this.emergency.fActPersion = this.radio\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"提交成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //  审核 通过\n      else if (this.emergency.fActStatus == 1) {\n        //将状态 变为 审核通过待批准\n        this.emergency.fActStatus = 2\n        //存放 处理人\n        this.emergency.fActPersion = this.radio\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"提交成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //  批准 通过\n      else if (this.emergency.fActStatus == 2) {\n        //将状态 变为 待发布\n        this.emergency.fActStatus = 3\n        //存放 处理人\n        this.emergency.fActPersion = this.radio\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"提交成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //  发布 通过\n      else if (this.emergency.fActStatus == 3) {\n        //将状态 变为 待演练\n        this.emergency.fActStatus = 4\n        //存放 处理人\n        this.emergency.fActPersion = this.radio\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"提交成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //  演练 通过\n      else if (this.emergency.fActStatus == 4) {\n        //将状态 变为 待执行\n        this.emergency.fActStatus = 5\n        //存放 处理人\n        this.emergency.fActPersion = this.radio\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"提交成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //  执行 通过\n      else if (this.emergency.fActStatus == 5) {\n        //将状态 变为 已执行\n        this.emergency.fActStatus = 6\n        //存放 处理人\n        this.emergency.fActPersion = this.radio\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"提交成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n      //  表单 提交\n      if (this.emergency.fActStatus == 7) {\n        //将状态 变为 待审核\n        this.emergency.fActStatus = 1\n        //存放 处理人\n        this.emergency.fActPersion = this.radio\n        updatePlanning(this.emergency).then(res => {\n          if (res.code == 200) {\n            this.msgSuccess(\"提交成功\")\n            this.dialogVisible = false\n            this.nextVisible = false\n            this.getList()\n          }\n        })\n      }\n\n    },\n\n\n\n  }\n};\n</script>\n<style lang=\"scss\">\n.color409 {\n  color: #409eff;\n  cursor: pointer;\n}\n</style>\n"]}]}