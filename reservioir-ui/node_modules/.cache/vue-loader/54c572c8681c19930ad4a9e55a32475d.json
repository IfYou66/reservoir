{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\annual\\enquiries.vue?vue&type=style&index=0&id=69d67a68&lang=scss&scoped=true&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\annual\\enquiries.vue","mtime":1640419131373},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo6OnYtZGVlcCAuZWwtdHJhbnNmZXJfX2J1dHRvbiB7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIHBhZGRpbmc6IDEycHg7CiAgZGlzcGxheTogYmxvY2s7CiAgbWFyZ2luLWxlZnQ6IDBweDsKfQoKOjp2LWRlZXAgLmVsLXRyYW5zZmVyX19idXR0b246Zmlyc3QtY2hpbGQgewogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0K"},{"version":3,"sources":["enquiries.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqwBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"enquiries.vue","sourceRoot":"src/views/runManagement/annual","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" v-show=\"showSearch\" :inline=\"true\">\n      <el-form-item label=\"调度名称\" prop=\"fPlanName\">\n        <el-input v-model=\"queryParams.fDispatchName\" placeholder=\"请输入计划名称\" clearable size=\"small\" style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\" />\n      </el-form-item>\n\n      <el-form-item label=\"状态\" prop=\"fActStatus\">\n        <el-select v-model=\"queryParams.fActStatus\" placeholder=\"状态\" clearable size=\"small\" style=\"width: 240px\">\n          <el-option v-for=\"item in controlStatus\" :key=\"item.dictValue\" :label=\"item.dictLabel\"\n            :value=\"item.dictValue\" />\n        </el-select>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n\n    <el-table v-loading=\"loading\" :data=\"controlList\">\n      <el-table-column width=\"55\" align=\"center\" />\n      <el-table-column label=\"序号\" align=\"center\" type=\"index\" width=\"200\" />\n      <el-table-column label=\"调度名称\" align=\"center\" prop=\"fDispatchName\" width=\"300\" />\n      <!-- <el-table-column label=\"预算\" align=\"center\" prop=\"fBudget\" :show-overflow-tooltip=\"true\" width=\"300\" /> -->\n      <el-table-column label=\"调度时间\" align=\"center\" prop=\"fEditTime\" :show-overflow-tooltip=\"true\" width=\"300\" />\n      <el-table-column label=\"状态\" align=\"center\" prop=\"fActStatus\" width=\"300\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"scope.row.fActStatus === 0\">待提交</span>\n          <span v-if=\"scope.row.fActStatus === 1\">待审核</span>\n          <span v-if=\"scope.row.fActStatus === 2\">待批准</span>\n          <span v-if=\"scope.row.fActStatus === 3\">已批准</span>\n          <span v-if=\"scope.row.fActStatus === 4\">已驳回</span>\n          <span v-if=\"scope.row.fActStatus === 5\">不通过</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"text\" @click=\"open1(scope.row)\">\n            <span v-if=\"scope.row.fActStatus == 0\">提交</span>\n            <span v-else-if=\"scope.row.fActStatus == 1\">审核</span>\n            <span v-else-if=\"scope.row.fActStatus == 2\">审批</span>\n            <span v-else-if=\"scope.row.fActStatus == 4\">修改</span>\n          </el-button>\n          <el-button v-if=\"scope.row.fActStatus > 1\" size=\"mini\" type=\"text\" @click=\"open2(scope.row)\">\n            详情\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParams.pageNum\" :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\" />\n\n    <el-dialog title=\"提示\" :visible.sync=\"editFormVisible1\" width=\"1500px\">\n      <mainDetails :rControl='rControl' :audit='audit'></mainDetails>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editFormVisible1 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\">提 交</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog title=\"提示\" :visible.sync=\"editFormVisible2\" width=\"1500px\">\n      <div class=\"from-div\">\n        <el-row class=\"from-top\">\n          <el-col :span=\"24\">\n            <div style=\"margin: 0 auto;display: flex;align-items: center;width: 100%;justify-content:center;\">\n              <div style=\"position: relative;\">\n                <img src=\"../../../assets/images/jin.png\" />\n                <div style=\"position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;\">1.编制</div>\n              </div>\n              <div style=\"position: relative;\">\n                <img :src=\"require(this.rControl.fActStatus>=1? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n                <div :style=\"this.rControl.fActStatus>=1? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n                  2.审核</div>\n              </div>\n              <div style=\"position: relative;\">\n                <img :src=\"require(this.rControl.fActStatus>=2? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n                <div :style=\"this.rControl.fActStatus>=2? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n                  3.审批</div>\n              </div>\n              <div style=\"position: relative;\">\n                <img :src=\"require(this.rControl.fActStatus==3? '../../../assets/images/jin.png':'../../../assets/images/jin1.png')\" />\n                <div :style=\"this.rControl.fActStatus==3? 'position: absolute;top: 10px;left: 100px;width: 50%;color: #FFFFFF;':'position: absolute;top: 10px;left: 100px;width: 50%;color: #757575;'\">\n                  4.完成</div>\n              </div>\n            </div>\n          </el-col>\n\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\" class=\"from-div-title\" style=\"background-color: rgba(215, 215, 215, 1); text-align: right;\">\n            <div style=\"margin-right: 10px\">\n              <el-button type=\"primary\" size=\"small\" @click=\"editFormVisible2 = false\">取消</el-button>\n              <el-button type=\"primary\" size=\"small\" @click=\"tijiao\">提交</el-button>\n            </div>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\" class=\"from-div-title\">年度调度编制表</el-col>\n        </el-row>\n        <el-row class=\"from-border-bottom\">\n          <el-col :span=\"3\" class=\"from-col-left\">\n            调度名称\n          </el-col>\n          <el-col :span=\"8\" class=\"from-border-right\">\n            <el-input v-model=\"rControl.fDispatchName\" placeholder=\"请输入内容\" :disabled=\"rControl.fActStatus == 0 ||rControl.fActStatus == 4 ? false : true\"></el-input>\n          </el-col>\n          <el-col :span=\"3\" class=\"from-col-left\">\n            调度类型\n          </el-col>\n          <el-col :span=\"3\" style=\"line-height: 40px;border-right: #a4d5ff 1px solid;\">\n            <div>\n              <el-select v-model=\"rControl.fDispatchType\" placeholder=\"请选择\" :disabled=\"rControl.fActStatus == 0 ||rControl.fActStatus == 4 ? false : true\">\n                <el-option v-for=\"item in audit.planType\" :key=\"item.dictValue\" :label=\"item.dictLabel\" :value=\"item.dictValue\">\n                </el-option>\n              </el-select>\n            </div>\n          </el-col>\n          <el-col :span=\"3\" class=\"from-col-left\">\n            预算（元）\n          </el-col>\n          <el-col :span=\"4\" class=\"from-border-right\">\n            <el-input v-model=\"rControl.fBudget\" placeholder=\"预算（元）\" :disabled=\"rControl.fActStatus == 0 ||rControl.fActStatus == 4 ? false : true\"></el-input>\n          </el-col>\n        </el-row>\n\n        <el-row class=\"from-border-bottom\">\n          <el-col :span=\"3\" class=\"from-borderibht\">\n            调度内容\n          </el-col>\n          <el-col :span=\"21\" style=\"height: 400px;\">\n            <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n              调度概述：\n            </div>\n            <el-input  maxlength=\"500\" show-word-limit  :disabled=\"rControl.fActStatus == 0 ||rControl.fActStatus == 4 ? false : true\" type=\"textarea\" :rows=\"8\" placeholder=\"请输入内容\"\n              v-model=\"rControl.fDispatchContent\">\n            </el-input>\n            <div style=\"display:flex;justify-content:space-between;margin-top: 100px;\">\n              <div style=\"width: 200px;margin-top: -60px;margin-left: 20px;\">\n                <el-upload  style=\"margin-left: 15px;margin-top: 15px\"\n                  class=\"upload-demo\" :headers=\"GLOBAL.headers()\" :action=\"GLOBAL.httpUrl\" :on-preview=\"handlePreview\"\n                  :on-remove=\"handleRemove\"  multiple :on-success=\"uploadedSuccess\"\n                  :show-file-list=\"true\" :auto-upload=\"true\" :limit=\"1\" :on-exceed=\"handleExceed\" :file-list=\"fileList\"  :before-upload = \"beforeAvatarUpload\" >\n                  <el-button size=\"small\" type=\"primary\" :disabled=\"rControl.fActStatus == 0 || rControl.fActStatus == 4 ? false : true\">上传附件</el-button>\n                  <div slot=\"tip\" class=\"el-upload__tip\" style=\"margin-top: 15px\">上传文件不得超过100M</div>\n                </el-upload>\n              </div>\n              <div style=\"font-size: 20px;margin-right: 10px;margin-top: -10px;\">\n                <div>\n                  <span>编制人：<el-input :disabled=\"rControl.fActStatus == 0 ||rControl.fActStatus == 4 ? false : true\"\n                      v-model=\"rControl.fEditPersion\" placeholder=\"请输入内容\"\n                      style=\"width:220px;border: 1px solid #DCDFE6;\">\n                    </el-input></span>\n                  <div class=\"block\" style=\"transform:translateY(10%)\">\n                    <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                    <el-date-picker :disabled=\"rControl.fActStatus == 0 ||rControl.fActStatus == 4 ? false : true\" type=\"date\"\n                      style=\"border: 1px solid #DCDFE6;\" v-model=\"rControl.fEditTime\" placeholder=\"选择日期\"\n                      format=\"yyyy 年 MM 月 dd 日\" value-format=\"yyyy-MM-dd HH:mm:ss\" >\n                    </el-date-picker>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </el-col>\n        </el-row>\n\n        <el-row class=\"from-border-bottom\">\n          <el-col :span=\"3\" class=\"from-col\">\n            调度审核\n          </el-col>\n          <el-col :span=\"21\" style=\"height: 50px;\">\n            <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n              审核意见：\n            </div>\n            <el-input  maxlength=\"500\" show-word-limit  :disabled=\"rControl.fActStatus == 1 ? false : true\" type=\"textarea\" :rows=\"3\" placeholder=\"请输入内容\"\n              v-model=\"rControl.fAuditContent\">\n            </el-input>\n            <div class=\"from-select\">\n              <div style=\"margin-left: 10px;\">\n                <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                  审核结果：\n                </div>\n                <el-select :disabled=\"rControl.fActStatus == 1 ? false : true\" v-model=\"rControl.fAuditResult\"\n                  clearable placeholder=\"请选择\">\n                  <el-option v-for=\"item in fReviewResultList\" :key=\"item.value\" :label=\"item.label\"\n                    :value=\"item.value\">\n                  </el-option>\n                </el-select>\n              </div>\n              <div>\n                <span>审核人：<el-input :disabled=\"rControl.fActStatus == 1 ? false : true\"\n                    v-model=\"rControl.fAuditPersion\" placeholder=\"请输入内容\" style=\"width:180px;\">\n                  </el-input></span>\n                <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                  <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                  <el-date-picker :disabled=\"rControl.fActStatus == 1 ? false : true\" type=\"date\"\n                    v-model=\"rControl.fAuditTime\" placeholder=\"选择日期\" format=\"yyyy 年 MM 月 dd 日\"\n                    value-format=\"yyyy-MM-dd HH:mm:ss\">\n                  </el-date-picker>\n                </div>\n              </div>\n            </div>\n          </el-col>\n        </el-row>\n\n        <el-row class=\"from-border-bottom\">\n          <el-col :span=\"3\" class=\"from-col\">\n            调度批准\n          </el-col>\n          <el-col :span=\"21\" style=\"height: 50px;\">\n            <div style=\"font-size: 16px;font-weight: 700;padding: 10px;\">\n              审批意见：\n            </div>\n            <el-input  maxlength=\"500\" show-word-limit  type=\"textarea\" :disabled=\"rControl.fActStatus == 2 ? false : true\" :rows=\"3\" v-model=\"rControl.fApproveContent\" placeholder=\"请输入内容\">\n            </el-input>\n            <div class=\"from-select\">\n              <div style=\"margin-left: 10px;\">\n                <div style=\"font-size: 16px;font-weight: 700;display:inline;\">\n                  审批结果：\n                </div>\n                <el-select :disabled=\"rControl.fActStatus == 2 ? false : true\" v-model=\"rControl.fApproveResult\" clearable placeholder=\"请选择\">\n                  <el-option  v-for=\"item in fReviewResultList\" :key=\"item.value\" :label=\"item.label\"\n                             :value=\"item.value\">\n                  </el-option>\n                </el-select>\n              </div>\n              <div>\n              <span>审批人：<el-input :disabled=\"rControl.fActStatus == 2 ? false : true\" v-model=\"rControl.fApprovePersion\" placeholder=\"请输入内容\" style=\"width:180px;\">\n                </el-input>\n              </span>\n                <div class=\"block\" style=\"display:inline;margin-left:10px;\">\n                  <span class=\"demonstration\" v-html=\"'时&ensp;&ensp;间：'\" />\n                  <el-date-picker :disabled=\"rControl.fActStatus == 2 ? false : true\" type=\"date\"\n                                  v-model=\"rControl.fApproveTime\" placeholder=\"选择日期\" format=\"yyyy 年 MM 月 dd 日\"\n                                  value-format=\"yyyy-MM-dd HH:mm:ss\">\n                  </el-date-picker>\n                </div>\n              </div>\n            </div>\n          </el-col>\n        </el-row>\n      </div>\n      <!-- <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editFormVisible2 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm2\">提 交</el-button>\n      </span> -->\n    </el-dialog>\n  </div>\n</template>\n<script>\n  import {\n    listControlImpl,\n    getControlImpl,\n    delControlImpl,\n    addControlImpl,\n    updateControlImpl,\n    startWorkFlowControlImpl,\n    taskReviewControlImpl\n  } from \"@/api/reservoir/controlImpl\";\n  import {\n    getUserList,\n  } from \"@/api/security/planning\";\n\n  import {\n    planDataQuery\n  } from \"@/api/emergency/emergency\";\n /* import {\n    listControl,\n    getControl,\n    delControl,\n    addControl,\n    updateControl,\n    startWorkFlow,\n    taskReview,\n    getDictByType\n  } from \"@/api/reservoir/control\";*/\n  import {\n    getToken\n  } from \"@/utils/auth\";\n  import {\n    getFileById\n  } from \"@/api/file\";\n  import {listControl,updateControl} from \"@/api/reservoir/annualEstablishment\"\n  import mainDetails from './annualEstablishment.vue';\n  export default {\n    components: {\n      mainDetails\n    },\n    name: \"RightToolbar\",\n    data() {\n      return {\n        controlStatus:[],\n        //审核结果 列表\n        fReviewResultList: [{\n          value: 1,\n          label: '通过'\n        },\n          {\n            value: 2,\n            label: '不通过'\n          },\n          {\n            value: 3,\n            label: '驳回'\n          },\n        ],\n        fPlanName: '',\n        rControlImpl: {},\n        userList: [],\n        nextVisible: false,\n        nextVisible2: false,\n        audit: [],\n        rControl: {},\n        // 总条数\n        total: 0,\n        fileList: [],\n        options: [],\n        options1: [],\n        // 是否显示弹出层\n        editFormVisible1: false,\n        editFormVisible2: false,\n        controlList: [],\n\n        // 查询参数\n        queryParams: {\n          pageNum: 1,\n          pageSize: 10,\n          fDispatchName: undefined,\n          fActStatus: undefined\n        },\n\n        queryParams2: {\n          fPreparedId: ''\n        }\n      };\n    },\n    props: {\n      showSearch: {\n        type: Boolean,\n        default: true,\n      },\n      columns: {\n        type: Array,\n      },\n    },\n    created() {\n      this.getList();\n      this.dataQuery();\n      this.Personnel();\n      this.getDitc();\n\n    },\n    methods: {\n      beforeAvatarUpload(file){\n      const isLt100M = file.size / 1024 / 1024 < 100;\n         if (!isLt100M) {\n                this.$message.error('上传文件大小不能超过 100MB!');\n                return false\n            }\n      },\n\n      dataQuery() {\n        var query = { dictType: 'Annual_Dispatching_Status' }\n        planDataQuery(query).then(res => {\n          if (res.code == 200) {\n            this.controlStatus = res.data\n          }\n        });\n      },\n\n\n      getFile() {\n        console.log('fileList = []');\n        this.fileList = [];\n        if (this.rControl.fImplId) {\n          getFileById({\n            id: this.rControl.fImplId\n          }).then(result => {\n            if (result) {\n              this.fileList = [{\n                name: result.data.fOldFileName,\n                url: result.data.fFilePath\n              }];\n              console.log(\"fileList.url:\", this.fileList[0].url);\n            }\n          })\n        }\n      },\n      uploadedSuccess(response, file, fileList) {\n        this.rControl.fImplId = response.data.fId;\n        this.getFile();\n      },\n      handleRemove(file, fileList) {\n        this.GLOBAL.commonFun(this.rControl.fImplId);\n        this.rControl.fImplId = '';\n        this.getFile();\n      },\n      handlePreview(file) {\n\t\t  // window.location.href = this.fileList[0].url;\r\n\t\t  window.open(this.fileList[0].url);\n\t  },\n      handleExceed(files, fileList) {\n        this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n      },\n      beforeRemove(file, fileList) {\n        return this.$confirm(`确定移除 ${file.name}？`);\n      },\n\n\n      open2(row) {\n        this.getFile();\n        this.editFormVisible2 = true;\n        this.fPlanName = row.fPlanName;\n        this.queryParams2.fPreparedId = row.fId;\n        this.rControl = row;\n        console.log(this.queryParams2);\n        listControlImpl(this.queryParams2).then(response => {\n          if (response.rows && response.rows[0]) {\n            this.rControl = response.rows[0]\n          }\n        });\n      },\n      //暂存  提交\n      tijiao() {\n        //判断是否为 <暂存> 状态\n        if (this.rControl.fActStatus == 0 || this.rControl.fActStatus == 4) {\n          //是否填写 预案名称\n          if (this.rControl.fDispatchName == null || this.rControl.fDispatchName == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写调度名称',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 预案编号\n          if (this.rControl.fDispatchType == null || this.rControl.fDispatchType == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择调度类型',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 发布开始时间\n          if (this.rControl.fBudget == null || this.rControl.fBudget == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写预算',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 发布结束时间\n          if (this.rControl.fDispatchContent == null || this.rControl.fDispatchContent == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写计划概述',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 预案概述\n          if (this.rControl.fEditPersion == null || this.rControl.fEditPersion == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写编制人',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 编制时间\n          if (this.rControl.fEditTime == null || this.rControl.fEditTime == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择编制时间',\n              type: 'error'\n            });\n            return false\n          }\n          //打开处理人 弹窗\n          this.addSubmits();\n        }\n        //判断是否为 <待审核> 状态\n        else if (this.rControl.fActStatus == 1) {\n          //是否填写 审核意见\n          if (this.rControl.fAuditContent == null || this.rControl.fAuditContent == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写审核意见',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 审核结果\n          if (this.rControl.fAuditResult == null || this.rControl.fAuditResult == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择审核结果',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 审核人\n          if (this.rControl.fAuditPersion == null || this.rControl.fAuditPersion == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写审核人',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 审核时间\n          if (this.rControl.fAuditTime == null || this.rControl.fAuditTime == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择审核时间',\n              type: 'error'\n            });\n            return false\n          }\n          //审核结果  为 通过\n          if (this.rControl.fAuditResult == 1) {\n            //打开处理人 弹窗\n            this.addSubmits();\n          }\n          //审核结果 为 不通过\n          else if (this.rControl.fAuditResult == 2) {\n            //将状态 变为 不同意删除\n            this.rControl.fActStatus = 5\n            updateControl(this.rControl).then(res => {\n              if (res.code == 200) {\n                this.msgSuccess(\"审核提交成功\")\n                this.editFormVisible2 = false\n                this.nextVisible = false\n                this.getList()\n              }\n            })\n          }\n          //审核结果 为 驳回\n          else if (this.rControl.fAuditResult == 3) {\n            //将状态 变为 不同意删除\n            this.rControl.fActStatus = 4\n            updateControl(this.rControl).then(res => {\n              if (res.code == 200) {\n                this.msgSuccess(\"审核提交成功\")\n                this.editFormVisible2 = false\n                this.nextVisible = false\n                this.getList()\n              }\n            })\n          }\n\n        }\n        //判断是否为 <待批准> 状态\n        else if (this.rControl.fActStatus == 2) {\n          //是否填写 审批意见\n          if (this.rControl.fApproveContent == null || this.rControl.fApproveContent == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写审批意见',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 审批结果\n          if (this.rControl.fApproveResult == null || this.rControl.fApproveResult == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择审批结果',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 审批人\n          if (this.rControl.fApprovePersion == null || this.rControl.fApprovePersion == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写审批人',\n              type: 'error'\n            });\n            return false\n          }\n          //是否填写 审批时间\n          if (this.rControl.fApproveTime == null || this.rControl.fApproveTime == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择审批时间',\n              type: 'error'\n            });\n            return false\n          }\n          //审批结果  为 通过\n          if (this.rControl.fApproveResult == 1) {\n            //打开处理人 弹窗\n            this.addSubmits();\n          }\n          //审批结果 为 不通过\n          else if (this.rControl.fApproveResult == 2) {\n            //将状态 变为 不同意删除\n            this.rControl.fActStatus = 5\n            updateControl(this.rControl).then(res => {\n              if (res.code == 200) {\n                this.msgSuccess(\"审批提交成功\")\n                this.editFormVisible2 = false\n                this.nextVisible = false\n                this.getList()\n              }\n            })\n          }\n          //审核结果 为 驳回\n          else if (this.rControl.fApproveResult == 3) {\n            //将状态 变为 不同意删除\n            this.rControl.fActStatus = 4\n            updateControl(this.rControl).then(res => {\n              if (res.code == 200) {\n                this.msgSuccess(\"审批提交成功\")\n                this.editFormVisible2 = false\n                this.nextVisible = false\n                this.getList()\n              }\n            })\n          }\n\n        }\n      },\n      addSubmits() {\n        //  表单 提交\n        if (this.rControl.fActStatus == 0 || this.rControl.fActStatus == 4) {\n          //将状态 变为 待审核\n          this.rControl.fActStatus = 1\n          //存放 处理人\n          this.rControl.fActPersion = this.radio\n          updateControl(this.rControl).then(res => {\n            if (res.code == 200) {\n              this.msgSuccess(\"提交成功\")\n              this.editFormVisible2 = false\n              this.nextVisible = false\n              this.getList()\n            }\n          })\n        }//  审核 通过\n        else if (this.rControl.fActStatus == 1) {\n          //将状态 变为 审核通过待批准\n          this.rControl.fActStatus = 2\n          //存放 处理人\n          this.rControl.fActPersion = this.radio\n          updateControl(this.rControl).then(res => {\n            if (res.code == 200) {\n              this.msgSuccess(\"提交成功\")\n              this.editFormVisible2 = false\n              this.nextVisible = false\n              this.getList()\n            }\n          })\n        } //  批准 通过\n        else if (this.rControl.fActStatus == 2) {\n          //将状态 变为 已批准\n          this.rControl.fActStatus = 3\n          //存放 处理人\n          this.rControl.fActPersion = this.radio\n          updateControl(this.rControl).then(res => {\n            if (res.code == 200) {\n              this.msgSuccess(\"提交成功\")\n              this.editFormVisible2 = false\n              this.nextVisible = false\n              this.getList()\n            }\n          })\n        }\n      },\n\n      nextL2() {\n        if (this.rControl.fActStatus == 5) {\n          startWorkFlowControlImpl(this.rControl).then(response => {\n            this.msgSuccess(\"提交成功\");\n            this.nextVisible2 = false;\n            this.editFormVisible2 = false;\n            this.getList();\n          });\n        } else if (this.rControl.fActStatus == 6) {\n          taskReviewControlImpl(this.rControl).then(response => {\n            this.msgSuccess(\"审核成功\");\n            this.nextVisible2 = false;\n            this.editFormVisible2 = false;\n            this.getList();\n          });\n        }\n      },\n\n      Personnel() {\n        getUserList().then(response => {\n          this.userList = response.data\n        })\n      },\n\n      submitForm2() {\n        this.nextL();\n      },\n\n      submitForm() {\n        this.nextL();\n      },\n\n      getDitc() {\n        getDictByType().then(response => {\n          this.audit = response.data\n        })\n        // listControl(this.queryParams2).then(response => {\n        //   if (response.rows) {\n        //     this.audit.list = response.rows;\n        //   }\n        // });\n      },\n\n      /** 查询控制运行计划 列表 */\n      getList() {\n        this.loading = true;\n        listControl(this.queryParams).then(response => {\n          this.controlList = response.rows;\n          this.total = response.total;\n          this.loading = false;\n        });\n      },\n      open1(rows) {\n        this.rControl = rows;\n        if (this.rControl.fPlanType) {\n          this.rControl.fPlanType = this.rControl.fPlanType.toString();\n          if (this.rControl.fReviewResult) {\n            this.rControl.fReviewResult = this.rControl.fReviewResult.toString();\n            if (this.rControl.fAuditResult) {\n              this.rControl.fAuditResult = this.rControl.fAuditResult.toString();\n            }\n          }\n        }\n\n\n          this.fileList = [];\n          if (this.rControl.fDispatchId) {\n            getFileById({\n              id: this.rControl.fDispatchId\n            }).then(result => {\n              if (result) {\n                this.fileList = [{\n                  name: result.data.fOldFileName,\n                  url: result.data.fFilePath\n                }];\n                console.log(\"fileList.url:\", this.fileList[0].url);\n              }\n            })\n          }\n\n        this.editFormVisible2 = true;\n      },\n      /** 搜索按钮操作 */\n      handleQuery() {\n        this.queryParams.pageNum = 1;\n        this.getList();\n      },\n\n      /** 重置按钮操作 */\n      resetQuery() {\n        this.queryParams = {};\n        this.handleQuery();\n      }\n    },\n  };\n</script>\n<style lang=\"scss\" scoped>\n  ::v-deep .el-transfer__button {\n    border-radius: 50%;\n    padding: 12px;\n    display: block;\n    margin-left: 0px;\n  }\n\n  ::v-deep .el-transfer__button:first-child {\n    margin-bottom: 10px;\n  }\n</style>\n"]}]}