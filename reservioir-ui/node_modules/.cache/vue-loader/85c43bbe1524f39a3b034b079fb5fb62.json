{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\managementGuarantee\\trainingManagement\\train.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\managementGuarantee\\trainingManagement\\train.vue","mtime":1640419131894},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbG9yNDA5IHsKICBjb2xvcjogIzQwOWVmZjsKICBjdXJzb3I6IHBvaW50ZXI7Cn0K"},{"version":3,"sources":["train.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoaA;AACA;AACA;AACA","file":"train.vue","sourceRoot":"src/views/managementGuarantee/trainingManagement","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" v-show=\"showSearch\" :inline=\"true\">\n      <el-form-item label=\"名称\" prop=\"roleName\">\n        <el-input\n          v-model=\"queryParams.fPlanName\"\n          placeholder=\"请输入计划名称\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n\n      <el-form-item label=\"状态\" prop=\"status\">\n        <el-select\n          v-model=\"queryParams.fActStatus\"\n          placeholder=\"状态\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n        >\n          <el-option\n            v-for=\"(item,index) in dict.trainingStatus\"\n            :key=\"item.dictValue\"\n            :label=\"item.dictLabel\"\n            :value=\"item.dictValue\"\n          />\n        </el-select>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"getList\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n\n    <el-table v-loading=\"loading\" :data=\"tableData\" border>\n<!--      <el-table-column label=\"序号\" align=\"center\" prop=\"id\" width=\"120\"/>-->\n      <el-table-column label=\"计划名称\" align=\"center\" prop=\"fPlanName\" :show-overflow-tooltip=\"true\" width=\"260\"/>\n      <el-table-column label=\"培训时间\" align=\"center\" prop=\"fTraTime\" :show-overflow-tooltip=\"true\" width=\"150\"/>\n      <el-table-column label=\"评价方式\" align=\"center\" prop=\"fEvaWay\" width=\"380\">\n        <template slot-scope=\"scope\">\n           <span v-for=\"(item,index) in dict.assessMode\" v-if=\"item.dictValue == scope.row.fEvaWay\">\n                  {{item.dictLabel}}\n                </span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"费用\" align=\"center\" prop=\"fBudget\">\n        <template slot-scope=\"scope\">\n            <span\n              @click=\"handleQuery\"\n            >{{ scope.row.fBudget }}元</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"状态\" align=\"center\" prop=\"fActNode\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span v-for=\"(item,index) in dict.trainingStatus\" v-if=\"scope.row.fActStatus == item.dictValue\">{{ item.dictLabel }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"{row}\">\n          <span v-if=\"row.fActStatus == '1'\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              @click=\"check(row)\"\n            >提交\n            </el-button>\n          </span>\n\n          <span v-if=\"row.fActStatus == '2'\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              @click=\"check(row)\"\n\n            >审核\n            </el-button>\n          </span>\n\n          <span v-if=\"row.fActStatus == '3'\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              @click=\"check(row)\"\n            >审批\n            </el-button>\n          </span>\n\n          <span v-if=\"row.fActStatus == '4'\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              @click=\"check(row)\"\n            >实施\n            </el-button>\n          </span>\n          <span v-if=\"row.fActStatus == '5'\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              @click=\"scoring(row)\"\n            >打分\n            </el-button>\n          </span>\n          <span v-if=\"row.fActStatus == '6'\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              @click=\"scoring(row)\"\n              style=\"margin-left: 5px\"\n            >详情\n            </el-button>\n          </span>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n    />\n\n    <el-dialog\n      title=\"培训审核\"\n      :visible.sync=\"dialogVisible\"\n      width=\"1500px\">\n      <Organization ref=\"plait\" @shut=\"closeReview\" @search=\"getList\"></Organization>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\n\nimport Organization from '../trainingManagement/organization.vue'\n\nimport {\n  listTraining,\n  queryDataDictionary,\n  dataQuery\n} from \"@/api/indemnification/training\";\n\nimport {\n  listJoinTraining\n} from \"@/api/indemnification/joinTraining\";\n\nimport {getFileById} from \"@/api/file\";\n\nexport default {\n  components: {\n    Organization\n  },\n  data() {\n    return {\n\n      dict:{\n        trainingStatus: [],\n        assessMode:[]\n      },\n\n      tableData:[],\n\n      dialogVisible: false,\n      // 遮罩层\n      loading: false,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        fPlanName: undefined,\n        fActStatus: undefined,\n        fPlanType: undefined\n      },\n      fileList:[],\n\n      formData: {\n\n        /** id */\n        fId: null,\n\n        /** 计划名称 */\n        fPlanName: null,\n\n        /** 评价方式 */\n        fEvaWay: null,\n\n        /** 预算 */\n        fBudget: null,\n\n        /** 培训开始时间 */\n        fStartTime: null,\n\n        /** 培训结束时间 */\n        fEndTime: null,\n\n        /** 培训概述 */\n        fTraContent: null,\n\n        /** 附件id */\n        fTraId: null,\n\n        /** 编制人 */\n        fPreparedBy: null,\n\n        /** 编制时间 */\n        fPreparationTime: null,\n\n        /** 培训人 */\n        fTraPersion: null,\n\n        /** 培训时间 */\n        fTraTime: null,\n\n        /** 审核意见 */\n        fReviewComments: null,\n\n        /** 审核结果 */\n        fReviewResult: null,\n\n        /** 审核人 */\n        fReviewPeople: null,\n\n        /** 审核时间 */\n        fReviewDate: null,\n\n        /** 审批意见 */\n        fAuditComments: null,\n\n        /** 审批结果 */\n        fAuditResult: null,\n\n        /** 审批人 */\n        fAuditPeople: null,\n\n        /** 审批时间 */\n        fAuditDate: null,\n\n        /** 实施内容 */\n        fImpContent: null,\n\n        /** 实施总结附件id */\n        fImpId: '',\n\n        /** 实施人 */\n        fImpPersion: null,\n\n        /** 实施时间 */\n        fImpTime: null,\n\n        /** 培训照片id */\n        fPhoto: null,\n\n        /** 状态 0:无效1：有效 */\n        fStatus: null,\n\n        /** 流程实例id */\n        fActId: null,\n\n        /** 流程下一环节审核人 */\n        fActPersion: null,\n\n        /** 流程状态 1已提交启动 2：审核中 3：驳回 4：审核完成 */\n        fActStatus: null,\n\n        /** 流程节点 */\n        fActNode: null,\n\n        /** 培训人员集合 */\n        joinTrainingList:[],\n\n      },\n\n      file:{},\n\n      files:{},\n\n    };\n  },\n\n  mounted(){\n    this.getList()\n    this.queryDataDictionary()\n    this.dataQuery()\n  },\n\n  methods: {\n\n    getList() {\n      this.loading = true;\n      listTraining(this.queryParams).then(response => {\n        this.tableData = response.rows;\n        this.total = response.total;\n        this.loading = false\n      });\n    },\n\n    queryDataDictionary() {\n      queryDataDictionary().then(res => {\n        this.dict.assessMode = res.data.assessMode\n        // this.dict.result = res.data.result\n        // this.dict.gender = res.data.gender\n        // this.dict.politicalStatus = res.data.politicalStatus\n        // this.dict.education = res.data.education\n      });\n    },\n\n    check(row) {\n\n      this.dialogVisible = true\n      this.formData = row\n      var data = {\n        fTrainingId: row.fId\n      }\n      listJoinTraining(data).then(res => {\n        if (res.code == 200) {\n          this.formData.joinTrainingList = res.rows\n        }\n      });\n\n      if (row.fTraId) {\n        getFileById({id: row.fTraId}).then(result => {\n          if (result) {\n           // this.file = result.data\n            // 调用子组件的方法\n            if (result) {\n              this.fileList = [{\n                name: result.data.fOldFileName,\n                url: result.data.fFilePath\n              }];\n              console.log(\"fileList.url:\", this.fileList[0].url);\n            }\n            this.$nextTick(() => {\n              this.$refs.plait.init(this.formData,this.fileList)\n            });\n          }\n        })\n      };\n    },\n\n    scoring(row) {\n      this.dialogVisible = true\n      this.formData = row\n      var data = {\n        fTrainingId: row.fId\n      }\n      listJoinTraining(data).then(res => {\n        if (res.code == 200) {\n          this.formData.joinTrainingList = res.rows\n        }\n      });\n      if (row.fTraId) {\n        getFileById({id: row.fTraId}).then(result => {\n          if (result) {\n            this.file = result.data\n          }\n        })\n      };\n      if (row.fImpId) {\n        getFileById({id: row.fImpId}).then(result => {\n          if (result) {\n            this.files = result.data\n          }\n        })\n      };\n      // 调用子组件的方法\n      this.$nextTick(() => {\n        this.$refs.plait.init(this.formData,this.file,this.files)\n      });\n    },\n\n    closeReview(data) {\n      this.dialogVisible = data\n    },\n\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n        .then(_ => {\n          done();\n        })\n        .catch(_ => {\n        });\n    },\n\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      // this.dateRange = [];\n      this.queryParams.fPlanName=null\n      this.queryParams.fActStatus=null\n      this.handleQuery();\n    },\n\n    dataQuery() {\n      var query = { dictType: 'trainingStatus'};\n      dataQuery(query).then(res => {\n        if (res.code == 200) {\n          this.dict.trainingStatus = res.data\n        }\n      });\n    }\n\n  }\n};\n</script>\n<style lang=\"scss\">\n.color409 {\n  color: #409eff;\n  cursor: pointer;\n}\n</style>\n"]}]}