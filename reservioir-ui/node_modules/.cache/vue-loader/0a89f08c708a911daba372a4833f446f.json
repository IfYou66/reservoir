{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\safetyManagement\\engineering\\system.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\safetyManagement\\engineering\\system.vue","mtime":1640096703498},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1711181252330},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHsgZ2V0TWFuYWdlbWVudEluZm9CeUNvZGUgfSBmcm9tICJAL2FwaS9pbmRlbW5pZmljYXRpb24vbWFuYWdlU3lzdGVtIjsKICBpbXBvcnQgewogICAgZ2V0RmlsZUJ5SWQKICB9IGZyb20gIkAvYXBpL2ZpbGUiOwogIGltcG9ydCB7CiAgICAgICAgbGlzdFR5cGUKICAgIH0gZnJvbSAiQC9hcGkvaW5kZW1uaWZpY2F0aW9uL3R5cGUuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZU5hbWU6ICcnLAogICAgICBsaXN0OicnLAogICAgICByZXNwb25zZTonJywKICAgICAgZmlsZUxpc3Q6W10sCgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEZpbGUodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCdmaWxlTGlzdCA9IFtdJyk7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXTsKICAgICAgaWYgKHZhbCkgewogICAgICAgIGdldEZpbGVCeUlkKHsKICAgICAgICAgIGlkOiB2YWwKICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbewogICAgICAgICAgICAgIG5hbWU6IHJlc3VsdC5kYXRhLmZPbGRGaWxlTmFtZSwKICAgICAgICAgICAgICB1cmw6IHJlc3VsdC5kYXRhLmZGaWxlUGF0aAogICAgICAgICAgICB9XTsKICAgICAgICAgICAgY29uc29sZS5sb2coImZpbGVMaXN0LnVybDoiLCB0aGlzLmZpbGVMaXN0KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgd2luZG93Lm9wZW4odGhpcy5maWxlTGlzdFswXS51cmwpOwogICAgfSwKICAgIC8qKiDmn6Xor6LliLbluqbliIbnsbvliJfooaggKi8KICAgIGdldFR5cGVMaXN0KCkgewogICAgICBsZXQgcXVlcnlQYXJhbXMgPSB7CiAgICAgIAlmUGFyZW50Q29kZTonRkxPT0RfUFJFVkVOVElPTicKICAgICAgfTsKICAgICAgbGlzdFR5cGUocXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uucm93cyk7CiAgICAgICAgICBpZihyZXNwb25zZS5yb3dzLmxlbmd0aD4wKXsKICAgICAgICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlLnJvd3MKICAgICAgICAgICAgdGhpcy5hY3RpdmVOYW1lPXRoaXMucmVzcG9uc2VbMF0uZkNvZGUKICAgICAgICAgICAgdGhpcy5nZXRNYW5hZ2VtZW50SW5mb0J5Q29kZSgpOwogICAgICAgICAgfQogICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2xpY2sodGFiLCBldmVudCkgewogICAgICBjb25zb2xlLmxvZyh0YWIsIGV2ZW50KTsKICAgICAgICAgIGdldE1hbmFnZW1lbnRJbmZvQnlDb2RlKHRhYi5uYW1lKS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YSkgewogICAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3VsdC5kYXRhCiAgICAgICAgICAgICAgaWYodGhpcy5saXN0LmZJbnN0aXR1dGlvbklkICE9ICcnKXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsZSh0aGlzLmxpc3QuZkluc3RpdHV0aW9uSWQpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICB0aGlzLmxpc3Q9bnVsbAogICAgICAgICAgICB9CiAgICAgICAgICB9KQoKICAgIH0sCiAgICBnZXRNYW5hZ2VtZW50SW5mb0J5Q29kZSgpewogICAgICBnZXRNYW5hZ2VtZW50SW5mb0J5Q29kZSh0aGlzLnJlc3BvbnNlWzBdLmZDb2RlKS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgaWYgKHJlc3VsdC5kYXRhKSB7CiAgICAgICAgICB0aGlzLmxpc3QgPSByZXN1bHQuZGF0YQogICAgICAgICAgaWYodGhpcy5saXN0LmZJbnN0aXR1dGlvbklkICE9ICcnKXsKICAgICAgICAgICAgdGhpcy5nZXRGaWxlKHRoaXMubGlzdC5mSW5zdGl0dXRpb25JZCkKICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICB0aGlzLmxpc3Q9bnVsbAogICAgICAgICAgICB9CiAgICAgIH0pCiAgICB9CgogIH0sCiAgY3JlYXRlZCgpIHsKICAgICAgdGhpcy5nZXRUeXBlTGlzdCgpCiAgfSwKfQo="},{"version":3,"sources":["system.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"system.vue","sourceRoot":"src/views/safetyManagement/engineering","sourcesContent":["<template>\n  <div>\n\n    <div class=\"front\">\n        <div class=\"system\">\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\" >\n              <el-tab-pane  v-for=\"(item,index) in response\" :label=\"item.fTypeName\" :name=\"item.fCode\">\n                <div >\n                  <div style=\"width: 100%;height: 100%;\" v-if=\"list!=null\">\n                    <img  src=\"../../../assets/background1.png\" class=\"imgSrc\"  />\n                    <div class=\"background-text\" style=\"margin-top: -150px;\">\n                      <div style=\"text-align: center;font-size: 26px;font-weight: 600;\">\n                        {{list.fSystemName}}\n                      </div>\n                      <div class=\"ql-container ql-snow\" style=\"border: 0px;\">\n\t\t\t\t\t\t\t\t\t\t     <div class=\"ql-editor\" v-html=\"list.fSystemContent\"  style=\"width: 70%;margin: 0 auto;margin-top: 30px;\"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n                    <div  v-if=\"fileList.length>0\"  style=\"width: 70%;margin: 0 auto;margin-top: 30px;text-align: left;padding: 12px 15px;\">\n                      <div>\n                        附件：\n                      </div>\n                      <el-upload style=\"width: 400px;\"  class=\"upload-demo\" :headers=\"GLOBAL.headers()\" :action=\"GLOBAL.httpUrl\" :on-preview=\"handlePreview\"\n                          :show-file-list=\"true\" disabled :file-list=\"fileList\">\n                      </el-upload>\n                    </div>\n                    </div>\n                    <img  src=\"../../../assets/background2.png\" class=\"imgSrc\"  style=\"margin-top: -30px;\" />\n                  </div>\n                </div>\n              </el-tab-pane>\n            </el-tabs>\n        </div>\n    </div>\n\n\n\n  </div>\n\n</template>\n\n<script>\n  import { getManagementInfoByCode } from \"@/api/indemnification/manageSystem\";\n  import {\n    getFileById\n  } from \"@/api/file\";\n  import {\n        listType\n    } from \"@/api/indemnification/type.js\";\nexport default {\n  components: {},\n  data() {\n    return {\n      activeName: '',\n      list:'',\n      response:'',\n      fileList:[],\n\n    };\n  },\n  methods: {\n    getFile(val) {\n      console.log('fileList = []');\n      this.fileList = [];\n      if (val) {\n        getFileById({\n          id: val\n        }).then(result => {\n          if (result) {\n            this.fileList = [{\n              name: result.data.fOldFileName,\n              url: result.data.fFilePath\n            }];\n            console.log(\"fileList.url:\", this.fileList);\n          }\n        })\n      }\n    },\n      handlePreview(file) {\n      window.open(this.fileList[0].url);\n    },\n    /** 查询制度分类列表 */\n    getTypeList() {\n      let queryParams = {\n      \tfParentCode:'FLOOD_PREVENTION'\n      };\n      listType(queryParams).then(response => {\n          console.log(response.rows);\n          if(response.rows.length>0){\n            this.response = response.rows\n            this.activeName=this.response[0].fCode\n            this.getManagementInfoByCode();\n          }\n    });\n    },\n    handleClick(tab, event) {\n      console.log(tab, event);\n          getManagementInfoByCode(tab.name).then(result => {\n            if (result.data) {\n              this.list = result.data\n              if(this.list.fInstitutionId != ''){\n                this.getFile(this.list.fInstitutionId)\n              }\n            }else{\n              this.list=null\n            }\n          })\n\n    },\n    getManagementInfoByCode(){\n      getManagementInfoByCode(this.response[0].fCode).then(result => {\n        if (result.data) {\n          this.list = result.data\n          if(this.list.fInstitutionId != ''){\n            this.getFile(this.list.fInstitutionId)\n          }\n        }else{\n              this.list=null\n            }\n      })\n    }\n\n  },\n  created() {\n      this.getTypeList()\n  },\n}\n</script>\n\n<style>\n\n\n  .system .el-tabs__item {\r\n    padding: 0 20px;\r\n    height: 40px;\r\n    -webkit-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    line-height: 40px;\r\n    display: initial !important;\r\n    list-style: none;\r\n    width: 0px !important;\n   padding-left: 20px !important;\n    padding-right: 20px !important;\r\n    text-align: center;\r\n    font-size: 18px;\r\n    font-weight: 500;\r\n    color: #303133;\r\n    position: relative;\r\n  }\n  .el-tabs__item.is-active {\n      color: #1890ff !important;\n  }\n  .el-upload-list__item.is-success .el-upload-list__item-status-label {\n      display: none !important;\n  }\n  .el-upload-list__item .el-icon-close-tip {\n      display: none !important;\n  }\r\n\n\n.background {\n  width: 100%;\n  height: 100%;\n  /**宽高100%是为了图片铺满屏幕 */\n/*  z-index: 1;\n  position: absolute;\n  padding-left: 200px;\n  padding-right: 200px; */\n}\n.background-text{\n  width: 100%;\n  height: 100%;\n  /**宽高100%是为了图片铺满屏幕 */\n/*  z-index: 2;\n  position: absolute; */\n  background-color: #BBE1F8;\n\n}\n\n.imgSrc {\n  height: 100%;\n  width: 100%;\n}\n\n.front {\n  width: 100%;\n  height: 100%;\n/*  z-index: 1;\n  position: absolute; */\n  text-align: center;\n}\n\n</style>\n"]}]}