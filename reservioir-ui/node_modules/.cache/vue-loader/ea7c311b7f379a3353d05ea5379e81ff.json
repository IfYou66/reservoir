{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\security\\securityCheck.vue?vue&type=style&index=0&id=1339e598&lang=scss&scoped=true&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\security\\securityCheck.vue","mtime":1640419131158},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKOjp2LWRlZXAgLmVsLXRyYW5zZmVyX19idXR0b24gewogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBwYWRkaW5nOiAxMnB4OwogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi1sZWZ0OiAwcHg7Cn0KOjp2LWRlZXAgLmVsLXRyYW5zZmVyX19idXR0b246Zmlyc3QtY2hpbGQgewogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KICAuZWwtaW1hZ2Utdmlld2VyX193cmFwcGVyIHsKICAgIHotaW5kZXg6IDk5OTk5OTk5ICFpbXBvcnRhbnQ7CiAgfQo="},{"version":3,"sources":["securityCheck.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"securityCheck.vue","sourceRoot":"src/views/runManagement/security","sourcesContent":["<template>\n  <div class=\"app-container\">\n        <el-form  ref=\"queryForm\"  :inline=\"true\">\n      <el-form-item label=\"名称\" prop=\"roleName\">\n        <el-input\n          v-model=\"fPlanName\"\n          placeholder=\"请输入计划名称\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n        />\n      </el-form-item>\n\n      <el-form-item label=\"状态\" prop=\"status\">\n        <el-select\n          v-model=\"fActStatus\"\n          placeholder=\"状态\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n        >\n          <el-option\n            v-for=\"(item,index) in approvalStatus\"\n            :key=\"index + 1\"\n            :label=\"item\"\n            :value=\"index + 1\"\n          />\n        </el-select>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n\n    <el-table v-loading=\"loading\" :data=\"data\" border>\n\n      <el-table-column label=\"序号\" align=\"center\"  type=\"index\" width=\"120\"/>\n      <el-table-column label=\"计划名称\" align=\"center\" prop=\"fPlanName\"  show-overflow-tooltip/>\n\n      <el-table-column label=\"计划内容\" align=\"center\" prop=\"fPlanContent\" :show-overflow-tooltip=\"true\"/>\n\n      <el-table-column label=\"计划类型\" align=\"center\" prop=\"fPlanType\" >\n        <template slot-scope=\"{row}\">\n          <span v-for=\"(item,index) in dict.plantTypeList\" v-if=\"row.fPlanType == item.dictValue\">{{item.dictLabel}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"编制时间\" align=\"center\" prop=\"fEditTime\" />\n      <el-table-column label=\"状态\" align=\"center\" prop=\"fActStatus\" >\n        <template slot-scope=\"{row}\">\n          <span v-if=\"row.fActStatus == 1\">待提交</span>\n          <span v-if=\"row.fActStatus == 2\">待审核</span>\n          <span v-if=\"row.fActStatus == 3\">待批准</span>\n          <span v-if=\"row.fActStatus == 4\">编制完成</span>\n          <span v-if=\"row.fActStatus == 5\">待实施</span>\n          <span v-if=\"row.fActStatus == 6\">待上报</span>\n          <span v-if=\"row.fActStatus == 7\">待处置</span>\n          <span v-if=\"row.fActStatus == 8\">实施待审核</span>\n          <span v-if=\"row.fActStatus == 9\">实施完成</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\" >\n        <template slot-scope=\"scope\">\n          <el-button\n            v-if=\"scope.row.fActStatus == 1\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open1(scope.row)\"\n          >待提交\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus == 2 && scope.row.landingPersonId == 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open1(scope.row)\"\n          >待审核\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus == 3 && scope.row.landingPersonId == 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open1(scope.row)\"\n          >待审批\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus >= 4 || scope.row.landingPersonId != 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open1(scope.row)\"\n          >计划详情\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus >= 4 || scope.row.landingPersonId != 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"detailExport(scope.row,'plan')\"\n          >计划导出\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus == 5 && scope.row.landingPersonId == 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open(scope.row)\"\n          >待实施\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus == 6 && scope.row.landingPersonId == 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open(scope.row)\"\n          >待上报\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus == 7 && scope.row.landingPersonId == 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open(scope.row)\"\n          >待处置\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus == 8 && scope.row.landingPersonId == 'audit'\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open(scope.row)\"\n          >实施待审核\n          </el-button>\n          <el-button\n            v-if=\"scope.row.fActStatus == 9\"\n            size=\"mini\"\n            type=\"text\"\n            @click=\"open(scope.row)\"\n          >实施详情\n          </el-button>\n           <!--<el-button\r\n            v-if=\"scope.row.fActStatus == 9\"\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            @click=\"detailExport(scope.row,'implementation')\"\r\n          >实施导出\r\n          </el-button>-->\n        </template>\n      </el-table-column>\n    </el-table>\n      <el-pagination\n         style=\"text-align: right;\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next\"\n          :total=\"total\">\n        </el-pagination>\n\n    <el-dialog\n      title=\"安全检查-计划详情\"\n      :visible.sync=\"editFormVisible1\"\n      width=\"1500px\"\n      >\n      <planning :fActId=\"fActId\" :fId=\"fId\" :time=\"time\" @shut=\"close\" @search=\"infor\"></planning>\n    </el-dialog>\n\n    <el-dialog\n      title=\"安全检查-实施详情\"\n      :visible.sync=\"editFormVisible\"\n      width=\"1500px\"\n      >\n        <Implement ref=\"impl\" @shut=\"closeReview\" @search=\"infor\"></Implement>\n\n    </el-dialog>\n\n\n\n  </div>\n</template>\n<script>\nimport { getEntity } from \"@/api/security/impl\";\nimport Implement from './Implement.vue';\nimport planning from './planning.vue';\nimport {\n      getPlanList\n  } from \"@/api/security/planning\";\nexport default {\n  components: {Implement,planning},\n  name: \"RightToolbar\",\n  data() {\n    return {\n      loading:false,\n      fPlanName:'',\n      fActStatus:'',\n      pageNum:1,\n      pageSize:10,\n      total:0,\n      fActId:'',\n      time:'',\n      fId:'',\n\t\t  dict: {\n        plantTypeList:[] \n      },\n      options: [{\n        value: '0',\n        label: '汛前检查'\n      }, {\n        value: '1',\n        label: '年度检查'\n      }, {\n        value: '2',\n        label: '特别检查'\n      }],\n\n      // 显隐数据\n      // 弹出层标题\n      title: \"显示/隐藏\",\n      // 是否显示弹出层\n      editFormVisible: false,\n      editFormVisible1: false,\n      data: [],\n\n         // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        planName: undefined,\n        status: undefined\n      },\n      approvalStatus: ['待提交', '待审核', '待批准', '编制完成','待实施','待上报','待处置','实施待审核','实施完成']\n    };\n  },\n  props: {},\n  created() {\n    this.infor();\n     //计划类型\n \t\tthis.getDicts(\"plan_type\").then(response => {\n      this.dict.plantTypeList = response.data;\n    });\n  },\n  methods: {\n          handleSizeChange(val) {\n            console.log(`每页 ${val} 条`);\n          },\n          handleCurrentChange(val) {\n            console.log(`当前页: ${val}`);\n            this.pageNum = val\n            this.infor()\n          },\n      infor(){\n          var params = {\n              fPlanName:this.fPlanName,\n              fActStatus:this.fActStatus,\n              pageNum:this.pageNum,\n              pageSize:this.pageSize,\n\n          }\n          getPlanList(params).then(response => {\n            console.log(22222,response.rows)\n            if(response.code==200){\n              this.total = response.total\n              this.data = response.rows\n            }\n          })\n      },\n    open(row){\n      var query = {fPlaneditId: parseInt(row.fId)}\n      getEntity(query).then(res => {\n        if (res.code == 200) {\n          this.editFormVisible = true;\n          // 调用子组件的方法\n          this.$nextTick(() => {\n            this.$refs.impl.init(row,res.data,0);\n          });\n        } else if (res.code == 500) {\n          this.msgError(\"该计划未被实施\");\n        }\n      });\n\n    },\n\n    closeReview(data) {\n      this.editFormVisible = data\n    },\n\n    close(data) {\n       this.editFormVisible1 = false\n    },\n\n    open1(val){\n      this.time = Date.parse(new Date())\n      this.fActId = val.fActId\n      this.fId = val.fId\n      this.editFormVisible1 = true;\n    },\n    \n    //word文档导出\n    detailExport(row,mark){\n    \t\n    \tvar queryParams = {fId: parseInt(row.fId)}\n    \t\n    \tif(mark == 'plan'){\r\n    \t\tthis.download('/reservoir/planEdit/detailExport', {\n\t        ...queryParams\n\t      }, `安检计划.xls`)\r\n    \t\t\r\n    \t}else{//实施\r\n    \t\tthis.download('/reservoir/SecuImpl/detailExport', {\n\t        ...queryParams\n\t      }, `安检实施.xls`)\r\n    \t}\n    },\n    \n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.infor()\n\n    },\n\n    /** 重置按钮操作 */\n    resetQuery() {\n      // this.dateRange = [];\n      // this.resetForm(\"queryForm\");\n      this.fPlanName = null\n      this.fActStatus = null\n      this.handleQuery();\n    }\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n::v-deep .el-transfer__button {\n  border-radius: 50%;\n  padding: 12px;\n  display: block;\n  margin-left: 0px;\n}\n::v-deep .el-transfer__button:first-child {\n  margin-bottom: 10px;\n}\n  .el-image-viewer__wrapper {\n    z-index: 99999999 !important;\n  }\n</style>\n"]}]}