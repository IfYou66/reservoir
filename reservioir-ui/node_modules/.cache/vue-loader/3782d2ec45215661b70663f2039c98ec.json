{"remainingRequest":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\maintenance\\planList.vue?vue&type=style&index=0&id=061fda84&lang=scss&scoped=true&","dependencies":[{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\src\\views\\runManagement\\maintenance\\planList.vue","mtime":1640419131573},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711181251489},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711181253421},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1711181252308},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1711181250722},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711181250741},{"path":"D:\\GraduationProject\\final\\reservioir\\reservioir-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1711181252689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKOjp2LWRlZXAgLmVsLXRyYW5zZmVyX19idXR0b24gewogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBwYWRkaW5nOiAxMnB4OwogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi1sZWZ0OiAwcHg7Cn0KOjp2LWRlZXAgLmVsLXRyYW5zZmVyX19idXR0b246Zmlyc3QtY2hpbGQgewogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0K"},{"version":3,"sources":["planList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"planList.vue","sourceRoot":"src/views/runManagement/maintenance","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- 顶部 搜索栏 -->\n    <el-form :model=\"queryParams\" ref=\"queryParams\" v-show=\"showSearch\" :inline=\"true\">\n\n      <el-form-item label=\"名称\" prop=\"fPlanName\">\n        <el-input v-model=\"queryParams.fPlanName\" placeholder=\"请输入计划名称\"\n          clearable size=\"small\" style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\" />\n      </el-form-item>\n\n      <el-form-item label=\"状态\" prop=\"fStatus\">\n        <el-select v-model=\"queryParams.fStatus\" placeholder=\"状态\" clearable\n        size=\"small\" style=\"width: 240px\" >\n          <el-option v-for=\"item in approvalStatus\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n\n    </el-form>\n\n    <!-- 表格 显示 -->\n    <el-table :data=\"data\">\n      <el-table-column width=\"55\" align=\"center\"/>\n      <el-table-column label=\"序号\" align=\"center\" prop=\"id\" width=\"120\">\n        <template scope=\"scope\">\n          <span>{{(scope.$index + 1)}} </span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"计划名称\" align=\"center\" prop=\"fPlanName\" width=\"180\"/>\n\n      <el-table-column label=\"计划时间\" align=\"center\" prop=\"fPreparationTime\" :show-overflow-tooltip=\"true\" width=\"150\"/>\n      <el-table-column label=\"计划概述\" align=\"center\" prop=\"fPlanContent\" width=\"380\"/>\n      <!-- <el-table-column label=\"实施情况(处理情况)\" align=\"center\" prop=\"rMainImplStatus\" width=\"380\">\n        <template scope=\"scope\">\n          <span v-if=\"scope.row.rMainImplStatus == -1\" >未实施</span>\n          <span v-if=\"scope.row.rMainImplStatus == 0\" >待提交</span>\n          <span v-if=\"scope.row.rMainImplStatus == 1\" >待审核</span>\n          <span v-if=\"scope.row.rMainImplStatus == 2\" >已审核</span>\n          <span v-if=\"scope.row.rMainImplStatus == 3\" >待修改</span>\n        </template>\n      </el-table-column> -->\n\n      <el-table-column label=\"状态\" align=\"center\" prop=\"fStatus\" width=\"180\">\n        <template scope=\"scope\">\n          <span v-if=\"scope.row.fStatus == 0\" >待提交</span>\n          <span v-if=\"scope.row.fStatus == 1\" >待审核</span>\n          <span v-if=\"scope.row.fStatus == 2\" >待批准</span>\n          <span v-if=\"scope.row.fStatus == 3\" >待实施</span>\n          <span v-if=\"scope.row.fStatus == 4\" >待修改</span>\n          <span v-if=\"scope.row.fStatus == 5\" >未通过</span>\n          <span v-if=\"scope.row.fStatus == 6\" >实施待提交</span>\n          <span v-if=\"scope.row.fStatus == 7\" >实施待审核</span>\n          <span v-if=\"scope.row.fStatus == 8\" >已实施</span>\n          <span v-if=\"scope.row.fStatus == 9\" >实施待修改</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"text\" @click=\"open1(scope.row)\"\n          v-if=\"scope.row.fStatus == 0\" >待提交 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open1(scope.row)\"\n          v-if=\"scope.row.fStatus == 1\" >待审核 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open1(scope.row)\"\n          v-if=\"scope.row.fStatus == 2\" >待批准 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open1(scope.row)\"\n          v-if=\"scope.row.fStatus == 3\" >待实施 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open1(scope.row)\"\n          v-if=\"scope.row.fStatus == 4\" >待修改 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open1(scope.row)\"\n          v-if=\"scope.row.fStatus == 5\" >未通过 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open(scope.row)\"\n          v-if=\"scope.row.fStatus == 6\">实施待提交 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open(scope.row)\"\n          v-if=\"scope.row.fStatus == 7\">实施待审核 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open(scope.row)\"\n          v-if=\"scope.row.fStatus == 8\">已实施 </el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"open(scope.row)\"\n          v-if=\"scope.row.fStatus == 9\">实施待修改 </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParams.pageNum\" :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\" />\n\n    <!-- 计划详情 弹窗 -->\n    <el-dialog title=\"计划详情\" :visible.sync=\"editFormVisible1\" width=\"1500px\" @close=\"initZi\">\n      <mainPlan :rMaintenance=\"rMaintenance\" :fileList=\"fileList\" @close1=\"close1\"></mainPlan>\n          <!-- <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"editFormVisible1 = false\">取 消</el-button>\n\n          <el-button type=\"primary\" @click=\"addPla\"\n          v-if=\"rMaintenance.fStatus == 0 \">提 交</el-button>\n\n          <el-button type=\"primary\" @click=\"modify\"\n          v-if=\"rMaintenance.fStatus == 4 \">修 改</el-button>\n\n          <el-button type=\"primary\" @click=\"review\"\n          v-if=\"rMaintenance.fStatus == 1 \">提交审核</el-button>\n\n          <el-button type=\"primary\" @click=\"approve\"\n          v-if=\"rMaintenance.fStatus == 2 \">提交审批</el-button>\n\n          <el-button type=\"primary\" @click=\"editFormVisible1 = false\"\n          v-if=\"rMaintenance.fStatus == 3 \">确 定</el-button>\n\n\n        </span> -->\n    </el-dialog>\n\n    <el-dialog title=\"实施详情\" :visible.sync=\"editFormVisible\" width=\"1500px\" @close=\"initZi\">\n      <mainDetails :rMainImpl=\"rMainImpl\" :options=\"optionsList\" :fileList=\"fileListImpl\" @close1=\"close1\"></mainDetails>\n      <!-- <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editFormVisible = false\">取 消</el-button>\n\n        <el-button type=\"primary\" @click=\"addPlaImpl\"\n        v-if=\"rMainImpl.fStatus == 0 \">提 交</el-button>\n\n        <el-button type=\"primary\" @click=\"modifyImpl\"\n        v-if=\"rMainImpl.fStatus == 3 \">修 改</el-button>\n\n        <el-button type=\"primary\" @click=\"reviewImpl\"\n        v-if=\"rMainImpl.fStatus == 1 \">提交审批</el-button>\n\n        <el-button type=\"primary\" @click=\"editFormVisible = false\" v-if=\"rMainImpl.fStatus == 2 \">确 定</el-button>\n\n\n      </span> -->\n    </el-dialog>\n\n    <!-- 下一流程 处理人 弹窗 -->\n    <el-dialog\n      title=\"选择处理人\"\n      :visible.sync=\"nextVisible\"\n      width=\"600px\"\n      >\n      <el-radio v-model=\"radio\" :label=\"item.userId\" v-for=\"(item,index) in list\" :key=\"index\">{{item.nickName}}</el-radio>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"nextVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addSubmits\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 下一流程 处理人 弹窗 -->\n    <el-dialog title=\"选择处理人\" :visible.sync=\"nextVisibleImpl\" width=\"600px\">\n      <el-radio v-model=\"radioImpl\" :label=\"item.userId\" v-for=\"(item,index) in list\" :key=\"index\">{{item.nickName}}</el-radio>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"nextVisibleImpl = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addSubmitsImpl\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n<script>\nimport mainDetails from './mainDetails.vue';\nimport mainPlan from './mainPlan.vue';\n//获得系统用户\nimport {getUserList } from \"@/api/security/planning\"\n//获得Token\nimport {getToken} from \"@/utils/auth\"\n//获得文件\nimport {getFileById} from \"@/api/file\"\n//计划 API\nimport { listMaintenance, getMaintenance, addMaintenance, updateMaintenance, delMaintenance} from \"@/api/repair/rmaintenance\"\n//实施 API\nimport {listImpl, getImpl, addImpl, updateImpl, delImpl} from \"@/api/repair/rmainimpl\"\nexport default {\n  components: {mainDetails,mainPlan},\n  name: \"RightToolbar\",\n  data() {\n    return {\n      // 文件上传\n      upload: {\n        // 设置上传的请求头部\n        headers: {Authorization: \"Bearer \" + getToken()},\n        // 上传的地址\n        url: \"http://localhost/dev-api/file/upload\"\n      },\n      fileList:[],\n\n      list:[],\n      //下一处理人 弹窗\n      nextVisible:false,\n      nextVisibleImpl:false,\n      //处理人\n      radio:'',\n      radioImpl:'',\n      //对象 计划\n      rMaintenance:{\n          //id\n          fId:'',\n          //计划名称\n          fPlanName:'',\n          //计划类型\n          fPlanType:'',\n          //预算\n          fBudget:'',\n          //计划概述\n          fPlanContent:'',\n          //计划附件\n          fPlanId:'',\n          //编制人\n          fPreparedBy:'',\n          //编制时间\n          fPreparationTime:'',\n\n          //审核意见\n          fReviewComments:'',\n          //审核结果\n          fReviewResult:'',\n          //审核人\n          fReviewPeople:'',\n          //审核时间\n          fReviewDate:'',\n\n          //审批意见\n          fAuditComments:'',\n          //审批结果\n          fAuditResult:'',\n          //审批人\n          fAuditPeople:'',\n          //审批时间\n          fAuditDate:'',\n\n          //创建人\n          fCreatePeople:'',\n          //创建时间\n          fCreateTime:'',\n          //状态 0:失效1：有效\n          fStatus:'',\n          //流程实例id\n          fActId:'',\n          //流程下一节点审核人\n          fActPersion:'',\n          //流程状态 流程状态\n          fActStatus:'',\n          //流程节点\n          fActNode:'',\n\n      },\n      //对象 计划 初始化\n      rMaintenanceInit:{\n          //id\n          fId:'',\n          //计划名称\n          fPlanName:'',\n          //计划类型\n          fPlanType:'',\n          //预算\n          fBudget:'',\n          //计划概述\n          fPlanContent:'',\n          //计划附件\n          fPlanId:'',\n          //编制人\n          fPreparedBy:'',\n          //编制时间\n          fPreparationTime:'',\n\n          //审核意见\n          fReviewComments:'',\n          //审核结果\n          fReviewResult:'',\n          //审核人\n          fReviewPeople:'',\n          //审核时间\n          fReviewDate:'',\n\n          //审批意见\n          fAuditComments:'',\n          //审批结果\n          fAuditResult:'',\n          //审批人\n          fAuditPeople:'',\n          //审批时间\n          fAuditDate:'',\n\n          //创建人\n          fCreatePeople:'',\n          //创建时间\n          fCreateTime:'',\n          //状态 0:失效1：有效\n          fStatus:'',\n          //流程实例id\n          fActId:'',\n          //流程下一节点审核人\n          fActPersion:'',\n          //流程状态 流程状态\n          fActStatus:'',\n          //流程节点\n          fActNode:'',\n\n      },\n      //对象 实施\n      rMainImplInit:{\n          //id\n          fId:'',\n          //计划编制id\n          fPreparedId:'',\n          //实施内容\n          fImplContent:'',\n          //实施内容附件id\n          fImplId:'',\n          //实施人\n          fImplPeople:'',\n          //实施时间\n          fImplTime:'',\n\n          //审核意见\n          fReviewComments:'',\n          //审核结果\n          fReviewResult:'',\n          //审核人\n          fReviewPeople:'',\n          //审核时间\n          fReviewDate:'',\n\n          //状态\n          fStatus:'',\n          //创建人\n          fCreatePeople:'',\n          //创建时间\n          fCreateTime:'',\n          //流程实例id\n          fActId:'',\n          //流程下一节点审核人\n          fActPersion:'',\n          //流程状态\n          fActStatus:'',\n          //流程节点\n          fActNode:'',\n      },\n      //对象 实施 初始化\n      rMainImpl:{\n          //id\n          fId:'',\n          //计划编制id\n          fPreparedId:'',\n          //实施内容\n          fImplContent:'',\n          //实施内容附件id\n          fImplId:'',\n          //实施人\n          fImplPeople:'',\n          //实施时间\n          fImplTime:'',\n\n          //审核意见\n          fReviewComments:'',\n          //审核结果\n          fReviewResult:'',\n          //审核人\n          fReviewPeople:'',\n          //审核时间\n          fReviewDate:'',\n\n          //状态\n          fStatus:'',\n          //创建人\n          fCreatePeople:'',\n          //创建时间\n          fCreateTime:'',\n          //流程实例id\n          fActId:'',\n          //流程下一节点审核人\n          fActPersion:'',\n          //流程状态\n          fActStatus:'',\n          //流程节点\n          fActNode:'',\n      },\n      //记录数\n      total:'',\n\n      options: [],\n      audit: [\n        { value: '选项1', label: '通过' },\n        { value: '选项2', label: '未通过' }\n      ],\n      options1: [\n        { value: '选项1', label: '汛前检查' },\n        { value: '选项2', label: '年度检查' },\n        { value: '选项3', label: '特别检查' }\n      ],\n      fileList:[],\n      // 显隐数据\n      // 弹出层标题\n      title: \"显示/隐藏\",\n      // 是否显示弹出层\n      editFormVisible: false,\n      editFormVisible1: false,\n      data: [],\n\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        planName: '',\n        status: '',\n      },\n      approvalStatus: [\n          {value: 0,label: '待提交'},\n          {value: 1,label: '待审核'},\n          {value: 2,label: '待批准'},\n          {value: 3,label: '待实施'},\n          {value: 4,label: '待修改'},\n          {value: 5,label: '未通过'},\n          {value: 6,label: '实施待提交'},\n          {value: 7,label: '实施待审核'},\n          {value: 8,label: '已实施'},\n          {value: 9,label: '实施待修改'},\n      ],\n      optionsList:'',\n      fileListImpl:'',\n\n    };\n  },\n  props: {\n    showSearch: {\n      type: Boolean,\n      default: true,\n    },\n    columns: {\n      type: Array,\n    },\n  },\n  created() {\n    this.getList()\n    this.personnel()\n    this.getListImpl()\n    //this.test()\n    // 显隐列初始默认隐藏列\n    for (let item in this.columns) {\n      if (this.columns[item].visible === false) {\n        this.value.push(parseInt(item));\n      }\n    }\n  },\n  methods: {\n    addSubmitsImpl() {\n      if(this.radioImpl == null || this.radioImpl == '') {\n        this.$message({\n          showClose: true,\n          message: '请选择处理人',\n          type: 'error'\n        });\n        return false\n      }\n      if(this.rMainImpl.fStatus == 0) {\n        this.rMainImpl.fStatus = 1\n        this.rMainImpl.fActPersion = this.radioImpl\n        updateImpl(this.rMainImpl).then(res => {\n          if(res.code == 200) {\n            updateMaintenance({fId:this.rMainImpl.fPreparedId,fStatus:7,fActPersion:this.radioImpl}).then(res => {\n              if(res.code == 200) {\n                console.log('提交成功')\n                this.rMainImpl = this.rMainImplInit\n                this.getList()\n                this.nextVisibleImpl = false\n                this.editFormVisible = false\n                this.fileListImpl = []\n                this.radioImpl = ''\n              }\n            })\n          }\n        })\n      }\n\n    },\n    reviewImpl() {\n        //是否填写 审核意见\n        if(this.rMainImpl.fReviewComments == null || this.rMainImpl.fReviewComments == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写审核意见',\n              type: 'error'\n            });\n            return false\n        }\n        //是否选择 审核结果\n        if(this.rMainImpl.fReviewResult == null || this.rMainImpl.fReviewResult == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择审核结果',\n              type: 'error'\n            });\n            return false\n        }\n        //是否填写 审核人\n        if(this.rMainImpl.fReviewPeople == null || this.rMainImpl.fReviewPeople == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写审核人',\n              type: 'error'\n            });\n            return false\n        }\n        //是否填写 实施时间\n        if(this.rMainImpl.fReviewDate == null || this.rMainImpl.fReviewDate == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择审核时间',\n              type: 'error'\n            });\n            return false\n        }\n        if(this.rMainImpl.fReviewResult == 1) {\n          this.rMainImpl.fStatus = 2\n          updateImpl(this.rMainImpl).then(res => {\n            if(res.code == 200) {\n              updateMaintenance({fId:this.rMainImpl.fPreparedId,fStatus:8,fActPersion:this.radioImpl}).then(res => {\n                if(res.code == 200) {\n                  console.log('提交成功')\n                  this.rMainImpl = this.rMainImplInit\n                  this.getList()\n                  this.nextVisibleImpl = false\n                  this.editFormVisible = false\n                  this.fileListImpl = []\n                  this.radioImpl = ''\n                }\n              })\n            }\n          })\n        }\n        else if(this.rMainImpl.fReviewResult == 2) {\n          this.rMainImpl.fStatus = 4\n          updateImpl(this.rMainImpl).then(res => {\n            if(res.code == 200) {\n              updateMaintenance({fId:this.rMainImpl.fPreparedId,fStatus:3}).then(res => {\n                if(res.code == 200) {\n                  console.log('提交成功')\n                  this.rMainImpl = this.rMainImplInit\n                  this.getList()\n                  this.nextVisibleImpl = false\n                  this.editFormVisible = false\n                  this.fileListImpl = []\n                  this.radioImpl = ''\n                }\n              })\n            }\n          })\n        }\n        else if(this.rMainImpl.fReviewResult == 3) {\n          this.rMainImpl.fStatus = 3\n          updateImpl(this.rMainImpl).then(res => {\n            if(res.code == 200) {\n              updateMaintenance({fId:this.rMainImpl.fPreparedId,fStatus:9}).then(res => {\n                if(res.code == 200) {\n                  console.log('提交成功')\n                  this.rMainImpl = this.rMainImplInit\n                  this.getList()\n                  this.nextVisibleImpl = false\n                  this.editFormVisible = false\n                  this.fileListImpl = []\n                  this.radioImpl = ''\n                }\n              })\n            }\n          })\n        }\n\n    },\n    addPlaImpl() {\n        //是否填写 计划编制\n        if(this.rMainImpl.fPreparedId == null || this.rMainImpl.fPreparedId == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择计划名称',\n              type: 'error'\n            });\n            return false\n        }\n        //是否填写 实施内容\n        if(this.rMainImpl.fImplContent == null || this.rMainImpl.fImplContent == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写实施内容',\n              type: 'error'\n            });\n            return false\n        }\n        //是否填写 实施人\n        if(this.rMainImpl.fImplPeople == null || this.rMainImpl.fImplPeople == '') {\n            this.$message({\n              showClose: true,\n              message: '请填写实施人',\n              type: 'error'\n            });\n            return false\n        }\n        //是否填写 实施时间\n        if(this.rMainImpl.fImplTime == null || this.rMainImpl.fImplTime == '') {\n            this.$message({\n              showClose: true,\n              message: '请选择实施时间',\n              type: 'error'\n            });\n            return false\n        }\n\n        this.rMainImpl.fStatus = 1\n        updateImpl(this.rMainImpl).then(res => {\n          if(res.code == 200) {\n            updateMaintenance({fId:this.rMainImpl.fPreparedId,fStatus:7,fActPersion:this.radioImpl}).then(res => {\n              if(res.code == 200) {\n                console.log('提交成功')\n                this.rMainImpl = this.rMainImplInit\n                this.getList()\n                this.nextVisibleImpl = false\n                this.editFormVisible = false\n                this.fileListImpl = []\n                this.radioImpl = ''\n              }\n            })\n          }\n        })\n    },\n    getListImpl() {\n      listMaintenance().then(res => {\n        if(res.code == 200) {\n          //res.rows.filter(obj => {\n          //  if(obj.fStatus == 3 && obj.rMainImplStatus == -1) {\n          //    this.optionsList.push(obj)\n          //  }\n          //})\n          this.optionsList = res.rows\n          console.log('初始化  查询',this.optionsList)\n        }\n      })\n    },\n    //测试 接口\n    test() {\n      console.log(\"测试接口 ===>\")\n      listCustomize().then(res => {\n        console.log(\"测试接口 ===>\",res.rows)\n      })\n    },\n    //点击 <下一个处理人> 弹窗 => <确定> 按钮\n    addSubmits() {\n      if(this.radio == null || this.radio == '') {\n        this.$message({\n          showClose: true,\n          message: '请选择处理人',\n          type: 'error'\n        });\n        return false\n      }\n\n      if(this.rMaintenance.fStatus == 0 ) {\n\n      }\n      //审核 完成\n      else if(this.rMaintenance.fStatus == 1) {\n        this.rMaintenance.fStatus = 2\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审核提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n      //审批 完成\n      else if(this.rMaintenance.fStatus == 2) {\n        this.rMaintenance.fStatus = 3\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审批提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n      //修改 完成\n      else if(this.rMaintenance.fStatus == 4) {\n\n      }\n    },\n    //获取处理人集合\n    personnel(){\n      console.log('获取处理人集合')\n      getUserList().then(response => {\n         console.log('获取处理人集合执行成功',response)\n        this.list = response.data\n      })\n    },\n    //列表 数据 查询\n    getList() {\n      listMaintenance(this.queryParams).then(res => {\n        if(res.code == 200) {\n          this.data = res.rows\n          this.total = res.total\n          console.log(\"初始化查询列表\", res.rows)\n        }\n      })\n    },\n\n    open(val){\n\n      if(val.fStatus == 6) {\n        listImpl({fStatus:0,fPreparedId:val.fId}).then(res => {\n          if(res.code == 200) {\n            console.log('获得实施对象 待提交',res)\n            this.rMainImpl = res.rows[0]\n\n            console.log('查询文件',this.rMainImpl.fImplId)\n            if(this.rMainImpl.fImplId != null && this.rMainImpl.fImplId != '' ) {\n              console.log('查询文件',this.rMainImpl.fImplId)\n              getFileById({id:this.rMainImpl.fImplId}).then(result =>{\n                if (result) {\n                  this.fileListImpl = [{name:result.data.fOldFileName,url:result.data.fFilePath}];\n                  console.log(\"fileListImpl.url:\",this.fileList[0].url);\n                  console.log(\"fileListImpl.name:\",this.fileList[0].name);\n\n                }\n              })\n            }\n\n          }\n        })\n      }\n      else if(val.fStatus == 7) {\n        listImpl({fStatus:1,fPreparedId:val.fId}).then(res => {\n          if(res.code == 200) {\n            console.log('获得实施对象 已提交',res)\n            this.rMainImpl = res.rows[0]\n\n            console.log('查询文件',this.rMainImpl.fImplId)\n            if(this.rMainImpl.fImplId != null && this.rMainImpl.fImplId != '' ) {\n              console.log('查询文件',this.rMainImpl.fImplId)\n              getFileById({id:this.rMainImpl.fImplId}).then(result =>{\n                if (result) {\n                  this.fileListImpl = [{name:result.data.fOldFileName,url:result.data.fFilePath}];\n                  console.log(\"fileListImpl.url:\",this.fileList[0].url);\n                  console.log(\"fileListImpl.name:\",this.fileList[0].name);\n\n                }\n              })\n            }\n\n          }\n        })\n      }\n      else if(val.fStatus == 8) {\n        listImpl({fStatus:2,fPreparedId:val.fId}).then(res => {\n          if(res.code == 200) {\n            console.log('获得实施对象 已完成',res)\n            this.rMainImpl = res.rows[0]\n\n            console.log('查询文件',this.rMainImpl.fImplId)\n            if(this.rMainImpl.fImplId != null && this.rMainImpl.fImplId != '' ) {\n              console.log('查询文件',this.rMainImpl.fImplId)\n              getFileById({id:this.rMainImpl.fImplId}).then(result =>{\n                if (result) {\n                  this.fileListImpl = [{name:result.data.fOldFileName,url:result.data.fFilePath}];\n                  console.log(\"fileListImpl.url:\",this.fileList[0].url);\n                  console.log(\"fileListImpl.name:\",this.fileList[0].name);\n                }\n              })\n            }\n\n\n          }\n        })\n      }\n      else if(val.fStatus == 9) {\n        listImpl({fStatus:3,fPreparedId:val.fId}).then(res => {\n          if(res.code == 200) {\n            console.log('获得实施对象 待修改',res)\n            this.rMainImpl = res.rows[0]\n            this.rMainImpl.fStatus = 0\n\n            console.log('查询文件',this.rMainImpl.fImplId)\n            if(this.rMainImpl.fImplId != null && this.rMainImpl.fImplId != '' ) {\n              console.log('查询文件',this.rMainImpl.fImplId)\n              getFileById({id:this.rMainImpl.fImplId}).then(result =>{\n                if (result) {\n                  this.fileListImpl = [{name:result.data.fOldFileName,url:result.data.fFilePath}];\n                  console.log(\"fileListImpl.url:\",this.fileList[0].url);\n                  console.log(\"fileListImpl.name:\",this.fileList[0].name);\n                }\n              })\n            }\n\n          }\n        })\n      }\n\n      this.editFormVisible = true;\n    },\n    open1(val){\n      console.log(\"图片ID=========>\",val.fPlanId)\n      if(val.fPlanId) {\n        getFileById({id:val.fPlanId}).then(result =>{\n          if (result) {\n            this.fileList = [{name:result.data.fOldFileName,url:result.data.fFilePath}];\n            console.log(\"fileList.url:\",this.fileList[0].url);\n            console.log(\"fileList.name:\",this.fileList[0].name);\n\n          }\n        })\n      }\n      console.log(\"文件列表\",this.fileList)\n      this.editFormVisible1 = true;\n      this.rMaintenance = val\n      if(this.rMaintenance.fPlanType){\n        this.rMaintenance.fPlanType = this.rMaintenance.fPlanType.toString()\n      }\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.dateRange = [];\n      this.resetForm(\"queryParams\");\n      this.handleQuery();\n    },\n    //修改 提交\n    modify() {\n      //是否填写 计划名称\n      if(this.rMaintenance.fPlanName == null || this.rMaintenance.fPlanName == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写计划名称',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 计划类型\n      if(this.rMaintenance.fPlanType == null || this.rMaintenance.fPlanType == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择计划类型',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 预算\n      if(this.rMaintenance.fBudget == null || this.rMaintenance.fBudget == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写预算',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 计划概述\n      if(this.rMaintenance.fPlanContent == null || this.rMaintenance.fPlanContent == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写计划概述',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 编制人\n      if(this.rMaintenance.fPreparedBy == null || this.rMaintenance.fPreparedBy == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写编制人',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 编制时间\n      if(this.rMaintenance.fPreparationTime == null || this.rMaintenance.fPreparationTime == '') {\n        this.$message({\n            showClose: true,\n            message: '请选择编制时间',\n            type: 'error'\n          });\n        return false\n      }\n      this.rMaintenance.fStatus = 1\n      updateMaintenance(this.rMaintenance).then(res => {\n        if(res.code == 200) {\n          this.msgSuccess(\"修改提交成功\")\n          this.nextVisible = false\n          this.editFormVisible1 = false\n          this.rMaintenance.fStatus = ''\n          this.rMaintenance = this.rMaintenanceInit\n          this.fileList = []\n        }\n      })\n    },\n    //提交\n    addPla() {\n      //是否填写 计划名称\n      if(this.rMaintenance.fPlanName == null || this.rMaintenance.fPlanName == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写计划名称',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 计划类型\n      if(this.rMaintenance.fPlanType == null || this.rMaintenance.fPlanType == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择计划类型',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 预算\n      if(this.rMaintenance.fBudget == null || this.rMaintenance.fBudget == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写预算',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 计划概述\n      if(this.rMaintenance.fPlanContent == null || this.rMaintenance.fPlanContent == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写计划概述',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 编制人\n      if(this.rMaintenance.fPreparedBy == null || this.rMaintenance.fPreparedBy == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写编制人',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 编制时间\n      if(this.rMaintenance.fPreparationTime == null || this.rMaintenance.fPreparationTime == '') {\n        this.$message({\n            showClose: true,\n            message: '请选择编制时间',\n            type: 'error'\n          });\n        return false\n      }\n\n      this.rMaintenance.fStatus = 1\n      updateMaintenance(this.rMaintenance).then(res => {\n        if(res.code == 200) {\n          this.msgSuccess(\"提交成功\")\n          this.nextVisible = false\n          this.editFormVisible1 = false\n          this.rMaintenance.fStatus = ''\n          this.rMaintenance = this.rMaintenanceInit\n          this.fileList = []\n          this.radio = ''\n        }\n      })\n      console.log(\"点击 点击 点击\")\n    },\n    //审核提交\n    review() {\n      //是否填写 审核意见\n      if(this.rMaintenance.fReviewComments == null || this.rMaintenance.fReviewComments == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审核意见',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 审核结果\n      if(this.rMaintenance.fReviewResult == null || this.rMaintenance.fReviewResult == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择审核结果',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 审核人\n      if(this.rMaintenance.fReviewPeople == null || this.rMaintenance.fReviewPeople == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审核人',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 审核时间\n      if(this.rMaintenance.fReviewDate == null || this.rMaintenance.fReviewDate == '') {\n        this.$message({\n            showClose: true,\n            message: '请选择审核时间',\n            type: 'error'\n          });\n        return false\n      }\n      //审批 未通过\n      if(this.rMaintenance.fReviewResult == 2) {\n        this.rMaintenance.fStatus = 5\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审批提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n      //审批 驳回\n      else if(this.rMaintenance.fReviewResult == 3) {\n        this.rMaintenance.fStatus = 4\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审批提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n      //审批 通过\n      else if(this.rMaintenance.fReviewResult == 1) {\n        this.rMaintenance.fStatus = 2\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审核提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n    },\n    approve() {\n      //是否填写 审批意见\n      if(this.rMaintenance.fAuditComments == null || this.rMaintenance.fAuditComments == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审批意见',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 审批结果\n      if(this.rMaintenance.fAuditResult == null || this.rMaintenance.fAuditResult == '') {\n          this.$message({\n            showClose: true,\n            message: '请选择审批结果',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 审核人\n      if(this.rMaintenance.fAuditPeople == null || this.rMaintenance.fAuditPeople == '') {\n          this.$message({\n            showClose: true,\n            message: '请填写审批人',\n            type: 'error'\n          });\n          return false\n      }\n      //是否填写 审批时间\n      if(this.rMaintenance.fAuditDate == null || this.rMaintenance.fAuditDate == '') {\n        this.$message({\n            showClose: true,\n            message: '请选择审批时间',\n            type: 'error'\n          });\n        return false\n      }\n      //审批 未通过\n      if(this.rMaintenance.fAuditResult == 2) {\n        this.rMaintenance.fStatus = 5\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审批提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n      //审批 驳回\n      else if(this.rMaintenance.fAuditResult == 3) {\n        this.rMaintenance.fStatus = 4\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审批提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n      //审批 通过\n      else if(this.rMaintenance.fAuditResult == 1) {\n        this.rMaintenance.fStatus = 3\n        updateMaintenance(this.rMaintenance).then(res => {\n          if(res.code == 200) {\n            this.msgSuccess(\"审批提交成功\")\n            this.nextVisible = false\n            this.editFormVisible1 = false\n            this.rMaintenance.fStatus = ''\n            this.rMaintenance = this.rMaintenanceInit\n            this.fileList = []\n          }\n        })\n      }\n    },\n    //当弹窗  关闭\n    initZi() {\n      console.log(\"---------- 弹窗  关闭 ----------\")\n      this.getList()\n      this.fileList = []\n      this.radio = ''\n      this.rMaintenance = this.rMaintenanceInit\n\n    },\r\n    // 关闭弹窗——计划\r\n    close1() {\r\n        this.editFormVisible1 = false\n        this.editFormVisible = false\r\n    },\r\n    // 关闭弹窗——实施\r\n    close() {\r\n        this.editFormVisible = false\r\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n::v-deep .el-transfer__button {\n  border-radius: 50%;\n  padding: 12px;\n  display: block;\n  margin-left: 0px;\n}\n::v-deep .el-transfer__button:first-child {\n  margin-bottom: 10px;\n}\n</style>\n"]}]}